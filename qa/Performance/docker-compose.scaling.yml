#DockerCompose—HorizontalScalingValidation(T210)#version:'3.8'services:#───LoadBalancer───────────────────────────────────────────lb:image:nginx:alpineports:-"8080:8080"volumes:-./nginx-scaling.conf:/etc/nginx/nginx.conf:rodepends_on:-gatewayhealthcheck:test:["CMD","wget","--spider","-q","http://localhost:8080/healthz"]interval:5stimeout:3sretries:3#───Gateway(scalable)─────────────────────────────────────gateway:build:context:../../services/gatewayenvironment:-ALFRED_ADDR=:8080-ALFRED_ENV=test-ALFRED_LOG_LEVEL=warn-REDIS_URL=redis://redis:6379depends_on:redis:condition:service_healthyhealthcheck:test:["CMD","wget","--spider","-q","http://localhost:8080/healthz"]interval:5stimeout:3sretries:3deploy:resources:limits:cpus:'1.0'memory:512Mreservations:cpus:'0.5'memory:256M#───Redis──────────────────────────────────────────────────redis:image:redis:7-alpineports:-"6379:6379"healthcheck:test:["CMD","redis-cli","ping"]interval:3stimeout:2sretries:5#───k6TestRunner─────────────────────────────────────────k6:image:grafana/k6:latestvolumes:-./scaling_test.js:/scripts/scaling_test.js:ro-../../qa/results:/resultsenvironment:-K6_OUT=json=/results/scaling_results.json-GATEWAY_URL=http://lb:8080-NODE_COUNT=${NODE_COUNT:-1}depends_on:lb:condition:service_healthyprofiles:-test#Onlystartwhenexplicitlyrequested