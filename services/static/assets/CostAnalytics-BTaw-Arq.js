import{j as e,a as p}from"./index-DmO1ypIk.js";import{r as n}from"./vendor-CoKE50sv.js";import{T as N,E as k,_ as D,D as w,$ as S,a0 as T,a1 as A,q as B}from"./icons-UwgmH0ZI.js";import{R as m,A as E,C as j,X as u,Y as g,T as x,a as L,P as M,b as R,c as $,L as P,B as F,d as K}from"./charts-DbFJi66O.js";const v=["#2563EB","#16A34A","#D97706","#DC2626","#8B5CF6","#EC4899"];function d({title:t,value:r,change:a,changeType:o,icon:c,color:i}){return e.jsx("div",{className:"card hover-lift",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--color-primary-500)"},children:t}),e.jsx("p",{className:"text-2xl font-bold mt-1",style:{color:"var(--color-primary-900)"},children:r}),a&&e.jsxs("div",{className:`flex items-center mt-2 text-sm ${o==="positive"?"text-green-600":"text-red-600"}`,children:[o==="positive"?e.jsx(B,{className:"w-4 h-4 mr-1"}):e.jsx(N,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:a})]})]}),e.jsx("div",{className:"p-3 rounded-lg",style:{background:`${i}15`},children:e.jsx(c,{className:"w-5 h-5",style:{color:i}})})]})})}function X(){const[t,r]=n.useState("30d"),[a,o]=n.useState([]),[c,i]=n.useState([]),[b,h]=n.useState(!0);return n.useEffect(()=>{async function s(){h(!0);try{const[l,C]=await Promise.all([p.get("/dashboard/cost-trends").catch(()=>({data:[]})),p.get("/dashboard/model-usage").catch(()=>({data:[]}))]);o(l.data||y()),i(C.data||f())}catch{o(y()),i(f())}h(!1)}s()},[t]),b?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"skeleton h-8 w-64 mb-4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(4)].map((s,l)=>e.jsx("div",{className:"skeleton h-32 rounded-xl"},l))}),e.jsx("div",{className:"skeleton h-80 rounded-xl"})]}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"page-header flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-6 h-6",style:{color:"var(--color-accent-600)"}}),"Cost Analytics"]}),e.jsx("p",{className:"subtitle",children:"Track AI spend across teams, models, and features"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:t,onChange:s=>r(s.target.value),className:"input",style:{width:"auto"},children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]}),e.jsxs("button",{className:"btn btn-secondary",children:[e.jsx(k,{className:"w-4 h-4 mr-2"})," Filter"]}),e.jsxs("button",{className:"btn btn-secondary",children:[e.jsx(D,{className:"w-4 h-4 mr-2"})," Export CSV"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(d,{title:"Total Spend",value:"$12,847",change:"12% vs last period",changeType:"positive",icon:w,color:"#2563EB"}),e.jsx(d,{title:"Tokens Used",value:"4.2M",change:"8% increase",changeType:"negative",icon:S,color:"#8B5CF6"}),e.jsx(d,{title:"Cache Savings",value:"$3,214",change:"32% hit rate",changeType:"positive",icon:T,color:"#16A34A"}),e.jsx(d,{title:"Avg Latency",value:"142ms",change:"5ms improvement",changeType:"positive",icon:A,color:"#D97706"})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Spend Over Time"}),e.jsx(m,{width:"100%",height:350,children:e.jsxs(E,{data:a,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorCost",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#2563EB",stopOpacity:.15}),e.jsx("stop",{offset:"95%",stopColor:"#2563EB",stopOpacity:0})]})}),e.jsx(j,{strokeDasharray:"3 3",stroke:"var(--color-border)"}),e.jsx(u,{dataKey:"date",tick:{fontSize:12},stroke:"var(--color-primary-400)"}),e.jsx(g,{tick:{fontSize:12},stroke:"var(--color-primary-400)",tickFormatter:s=>`$${s}`}),e.jsx(x,{contentStyle:{borderRadius:8,border:"1px solid var(--color-border)"}}),e.jsx(L,{type:"monotone",dataKey:"cost",stroke:"#2563EB",fill:"url(#colorCost)",strokeWidth:2})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Spend by Model"}),e.jsx(m,{width:"100%",height:300,children:e.jsxs(M,{children:[e.jsx(R,{data:c,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,label:!0,children:c.map((s,l)=>e.jsx($,{fill:v[l%v.length]},l))}),e.jsx(x,{}),e.jsx(P,{})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Spend by Team"}),e.jsx(m,{width:"100%",height:300,children:e.jsxs(F,{data:G(),layout:"vertical",children:[e.jsx(j,{strokeDasharray:"3 3",stroke:"var(--color-border)"}),e.jsx(u,{type:"number",tick:{fontSize:12},tickFormatter:s=>`$${s}`}),e.jsx(g,{type:"category",dataKey:"team",tick:{fontSize:12},width:100}),e.jsx(x,{}),e.jsx(K,{dataKey:"spend",fill:"#2563EB",radius:[0,4,4,0]})]})})]})]})]})}function y(){const t=[];for(let r=30;r>=0;r--){const a=new Date;a.setDate(a.getDate()-r),t.push({date:a.toLocaleDateString("en-US",{month:"short",day:"numeric"}),cost:Math.floor(300+Math.random()*200)})}return t}function f(){return[{name:"GPT-4",value:4500},{name:"Claude 3.5",value:3200},{name:"GPT-3.5",value:2100},{name:"Gemini",value:1800},{name:"Mistral",value:1200}]}function G(){return[{team:"Platform",spend:4200},{team:"ML Engineering",spend:3800},{team:"Product",spend:2600},{team:"QA",spend:1400},{team:"Research",spend:900}]}export{X as default};
