import{a as n,j as s}from"./index-DmO1ypIk.js";import{r as t}from"./vendor-CoKE50sv.js";import"./icons-UwgmH0ZI.js";function E(){const[c,g]=t.useState([]),[u,R]=t.useState([]),[p,f]=t.useState([]),[d,h]=t.useState(""),[m,x]=t.useState(""),[o,P]=t.useState(""),[i,j]=t.useState(""),[a,C]=t.useState(""),[v,l]=t.useState("");t.useEffect(()=>{r()},[]);async function r(){g(await n.getRoles()),R(await n.getPermissions()),f(await n.getUsersSimple())}async function w(){d&&(await n.createRole({name:d}),h(""),r(),l("Role created"))}async function S(e){await n.deleteRole(e),r(),l("Role deleted")}async function y(){m&&(await n.createPermission({name:m}),x(""),r(),l("Permission created"))}async function A(e){await n.deletePermission(e),r(),l("Permission deleted")}async function b(){!o||!i||(await n.assignRoleToUser(o,i),l("Role assigned to user"))}async function k(){!o||!i||(await n.removeRoleFromUser(o,i),l("Role removed from user"))}async function U(){!i||!a||(await n.assignPermissionToRole(i,a),l("Permission assigned to role"))}async function D(){!i||!a||(await n.removePermissionFromRole(i,a),l("Permission removed from role"))}return s.jsxs("div",{style:{padding:24},children:[s.jsx("h2",{children:"RBAC Management"}),v&&s.jsx("div",{style:{color:"green",marginBottom:8},children:v}),s.jsxs("div",{style:{display:"flex",gap:32},children:[s.jsxs("div",{children:[s.jsx("h3",{children:"Roles"}),s.jsx("ul",{children:c.map(e=>s.jsxs("li",{children:[e.name," ",s.jsx("button",{onClick:()=>S(e.id),children:"Delete"})]},e.id))}),s.jsx("input",{value:d,onChange:e=>h(e.target.value),placeholder:"New role name"}),s.jsx("button",{onClick:w,children:"Create Role"})]}),s.jsxs("div",{children:[s.jsx("h3",{children:"Permissions"}),s.jsx("ul",{children:u.map(e=>s.jsxs("li",{children:[e.name," ",s.jsx("button",{onClick:()=>A(e.id),children:"Delete"})]},e.id))}),s.jsx("input",{value:m,onChange:e=>x(e.target.value),placeholder:"New permission name"}),s.jsx("button",{onClick:y,children:"Create Permission"})]})]}),s.jsxs("div",{style:{marginTop:32},children:[s.jsx("h3",{children:"Assign Roles to Users"}),s.jsxs("select",{value:o,onChange:e=>P(e.target.value),children:[s.jsx("option",{value:"",children:"Select user"}),p.map(e=>s.jsxs("option",{value:e.id,children:[e.name," (",e.email,")"]},e.id))]}),s.jsxs("select",{value:i,onChange:e=>j(e.target.value),children:[s.jsx("option",{value:"",children:"Select role"}),c.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]}),s.jsx("button",{onClick:b,children:"Assign"}),s.jsx("button",{onClick:k,children:"Remove"})]}),s.jsxs("div",{style:{marginTop:32},children:[s.jsx("h3",{children:"Assign Permissions to Roles"}),s.jsxs("select",{value:i,onChange:e=>j(e.target.value),children:[s.jsx("option",{value:"",children:"Select role"}),c.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]}),s.jsxs("select",{value:a,onChange:e=>C(e.target.value),children:[s.jsx("option",{value:"",children:"Select permission"}),u.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]}),s.jsx("button",{onClick:U,children:"Assign"}),s.jsx("button",{onClick:D,children:"Remove"})]})]})}export{E as default};
