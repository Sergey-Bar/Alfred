packagehandlerimport("net/http""github.com/go-chi/chi/v5""github.com/rs/zerolog""github.com/AlfredDev/alfred/services/gateway/caching")//CacheHandlerhandlescachemanagementRESTendpoints.typeCacheHandlerstruct{engine*caching.Engineloggerzerolog.Logger}//NewCacheHandlercreatesanewcachehandler.funcNewCacheHandler(engine*caching.Engine,loggerzerolog.Logger)*CacheHandler{return&CacheHandler{engine:engine,logger:logger.With().Str("handler","cache").Logger(),}}//StatshandlesGET/v1/cache/stats(T113).func(h*CacheHandler)Stats(whttp.ResponseWriter,r*http.Request){stats:=h.engine.Stats()writeJSON(w,http.StatusOK,stats)}//FlushNamespacehandlesDELETE/v1/cache/{namespace}(T114).func(h*CacheHandler)FlushNamespace(whttp.ResponseWriter,r*http.Request){namespace:=chi.URLParam(r,"namespace")count:=h.engine.FlushNamespace(namespace)h.logger.Info().Str("namespace",namespace).Int("evicted",count).Msg("cachenamespaceflushed")writeJSON(w,http.StatusOK,map[string]interface{}{"flushed":true,"namespace":namespace,"evicted":count,})}//FlushAllhandlesDELETE/v1/cache(T114).func(h*CacheHandler)FlushAll(whttp.ResponseWriter,r*http.Request){count:=h.engine.FlushAll()h.logger.Info().Int("evicted",count).Msg("fullcacheflush")writeJSON(w,http.StatusOK,map[string]interface{}{"flushed":true,"evicted":count,})}//InvalidateEntryhandlesDELETE/v1/cache/{namespace}/{entryId}(T114).func(h*CacheHandler)InvalidateEntry(whttp.ResponseWriter,r*http.Request){namespace:=chi.URLParam(r,"namespace")entryID:=chi.URLParam(r,"entryId")found:=h.engine.Invalidate(namespace,entryID)if!found{writeJSON(w,http.StatusNotFound,map[string]string{"error":"entrynotfound"})return}writeJSON(w,http.StatusOK,map[string]interface{}{"invalidated":true,"namespace":namespace,"entry_id":entryID,})}