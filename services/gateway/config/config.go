packageconfigimport("os""strconv""time""github.com/joho/godotenv")//Configholdsallgatewayconfigurationvalues.typeConfigstruct{//ServerAddrstringEnvstringGracefulTimeouttime.Duration//DatabaseDatabaseURLstring//RedisRedisURLstring//Upstreambackend(PythonFastAPI)BackendURLstring//AuthenticationAPIKeyHeaderstring//RatelimitingRateLimitEnabledboolRateLimitRPMint//requestsperminuteperkeyRateLimitBurstint//TimeoutsDefaultTimeouttime.DurationProviderTimeoutsmap[string]time.Duration//BodylimitsMaxBodyBytesint64//ProviderdefaultsDefaultProviderstring//LoggingLogLevelstring}//Loadreadsconfigurationfromenvironmentvariablesandoptional.envfile.funcLoad()*Config{_=godotenv.Load()gracefulSec:=getEnvInt("GATEWAY_GRACEFUL_TIMEOUT_SEC",15)defaultTimeoutSec:=getEnvInt("GATEWAY_DEFAULT_TIMEOUT_SEC",120)cfg:=&Config{Addr:getEnv("GATEWAY_ADDR",":8080"),Env:getEnv("ENV","development"),GracefulTimeout:time.Duration(gracefulSec)*time.Second,DatabaseURL:getEnv("DATABASE_URL","postgres://postgres:postgres@postgres:5432/ao?sslmode=disable"),RedisURL:getEnv("REDIS_URL","redis://redis:6379"),BackendURL:getEnv("BACKEND_URL","http://localhost:8000"),APIKeyHeader:getEnv("API_KEY_HEADER","Authorization"),RateLimitEnabled:getEnvBool("RATE_LIMIT_ENABLED",true),RateLimitRPM:getEnvInt("RATE_LIMIT_RPM",60),RateLimitBurst:getEnvInt("RATE_LIMIT_BURST",10),DefaultTimeout:time.Duration(defaultTimeoutSec)*time.Second,MaxBodyBytes:int64(getEnvInt("GATEWAY_MAX_BODY_BYTES",1*1024*1024)),DefaultProvider:getEnv("DEFAULT_PROVIDER","openai"),LogLevel:getEnv("LOG_LEVEL","info"),ProviderTimeouts:map[string]time.Duration{"openai":time.Duration(getEnvInt("PROVIDER_TIMEOUT_OPENAI_SEC",120))*time.Second,"anthropic":time.Duration(getEnvInt("PROVIDER_TIMEOUT_ANTHROPIC_SEC",120))*time.Second,"google":time.Duration(getEnvInt("PROVIDER_TIMEOUT_GOOGLE_SEC",120))*time.Second,"azure":time.Duration(getEnvInt("PROVIDER_TIMEOUT_AZURE_SEC",120))*time.Second,"mistral":time.Duration(getEnvInt("PROVIDER_TIMEOUT_MISTRAL_SEC",60))*time.Second,"cohere":time.Duration(getEnvInt("PROVIDER_TIMEOUT_COHERE_SEC",60))*time.Second,},}returncfg}//IsDevelopmentreturnstrueifrunningindevelopmentmode.func(c*Config)IsDevelopment()bool{returnc.Env=="development"}//IsProductionreturnstrueifrunninginproductionmode.func(c*Config)IsProduction()bool{returnc.Env=="production"}//ProviderTimeoutreturnstheconfiguredtimeoutforagivenprovider.func(c*Config)ProviderTimeout(providerstring)time.Duration{ift,ok:=c.ProviderTimeouts[provider];ok{returnt}returnc.DefaultTimeout}funcgetEnv(key,fallbackstring)string{ifv,ok:=os.LookupEnv(key);ok{returnv}returnfallback}funcgetEnvInt(keystring,fallbackint)int{ifv,ok:=os.LookupEnv(key);ok{ifi,err:=strconv.Atoi(v);err==nil{returni}}returnfallback}funcgetEnvBool(keystring,fallbackbool)bool{ifv,ok:=os.LookupEnv(key);ok{ifb,err:=strconv.ParseBool(v);err==nil{returnb}}returnfallback}