---name:vercel-react-best-practicesdescription:ReactandNext.jsperformanceoptimizationguidelinesfromVercelEngineering.Thisskillshouldbeusedwhenwriting,reviewing,orrefactoringReact/Next.jscodetoensureoptimalperformancepatterns.TriggersontasksinvolvingReactcomponents,Next.jspages,datafetching,bundleoptimization,orperformanceimprovements.---#VercelReactBestPracticesComprehensiveperformanceoptimizationguideforReactandNext.jsapplications,maintainedbyVercel.Contains45rulesacross8categories,prioritizedbyimpacttoguideautomatedrefactoringandcodegeneration.##WhentoApplyReferencetheseguidelineswhen:-WritingnewReactcomponentsorNext.jspages-Implementingdatafetching(clientorserver-side)-Reviewingcodeforperformanceissues-RefactoringexistingReact/Next.jscode-Optimizingbundlesizeorloadtimes##RuleCategoriesbyPriority|Priority|Category|Impact|Prefix||----------|----------|--------|--------||1|EliminatingWaterfalls|CRITICAL|`async-`||2|BundleSizeOptimization|CRITICAL|`bundle-`||3|Server-SidePerformance|HIGH|`server-`||4|Client-SideDataFetching|MEDIUM-HIGH|`client-`||5|Re-renderOptimization|MEDIUM|`rerender-`||6|RenderingPerformance|MEDIUM|`rendering-`||7|JavaScriptPerformance|LOW-MEDIUM|`js-`||8|AdvancedPatterns|LOW|`advanced-`|##QuickReference###1.EliminatingWaterfalls(CRITICAL)-`async-defer-await`-Moveawaitintobrancheswhereactuallyused-`async-parallel`-UsePromise.all()forindependentoperations-`async-dependencies`-Usebetter-allforpartialdependencies-`async-api-routes`-Startpromisesearly,awaitlateinAPIroutes-`async-suspense-boundaries`-UseSuspensetostreamcontent###2.BundleSizeOptimization(CRITICAL)-`bundle-barrel-imports`-Importdirectly,avoidbarrelfiles-`bundle-dynamic-imports`-Usenext/dynamicforheavycomponents-`bundle-defer-third-party`-Loadanalytics/loggingafterhydration-`bundle-conditional`-Loadmodulesonlywhenfeatureisactivated-`bundle-preload`-Preloadonhover/focusforperceivedspeed###3.Server-SidePerformance(HIGH)-`server-cache-react`-UseReact.cache()forper-requestdeduplication-`server-cache-lru`-UseLRUcacheforcross-requestcaching-`server-serialization`-Minimizedatapassedtoclientcomponents-`server-parallel-fetching`-Restructurecomponentstoparallelizefetches-`server-after-nonblocking`-Useafter()fornon-blockingoperations###4.Client-SideDataFetching(MEDIUM-HIGH)-`client-swr-dedup`-UseSWRforautomaticrequestdeduplication-`client-event-listeners`-Deduplicateglobaleventlisteners###5.Re-renderOptimization(MEDIUM)-`rerender-defer-reads`-Don'tsubscribetostateonlyusedincallbacks-`rerender-memo`-Extractexpensiveworkintomemoizedcomponents-`rerender-dependencies`-Useprimitivedependenciesineffects-`rerender-derived-state`-Subscribetoderivedbooleans,notrawvalues-`rerender-functional-setstate`-UsefunctionalsetStateforstablecallbacks-`rerender-lazy-state-init`-PassfunctiontouseStateforexpensivevalues-`rerender-transitions`-UsestartTransitionfornon-urgentupdates###6.RenderingPerformance(MEDIUM)-`rendering-animate-svg-wrapper`-Animatedivwrapper,notSVGelement-`rendering-content-visibility`-Usecontent-visibilityforlonglists-`rendering-hoist-jsx`-ExtractstaticJSXoutsidecomponents-`rendering-svg-precision`-ReduceSVGcoordinateprecision-`rendering-hydration-no-flicker`-Useinlinescriptforclient-onlydata-`rendering-activity`-UseActivitycomponentforshow/hide-`rendering-conditional-render`-Useternary,not&&forconditionals###7.JavaScriptPerformance(LOW-MEDIUM)-`js-batch-dom-css`-GroupCSSchangesviaclassesorcssText-`js-index-maps`-BuildMapforrepeatedlookups-`js-cache-property-access`-Cacheobjectpropertiesinloops-`js-cache-function-results`-Cachefunctionresultsinmodule-levelMap-`js-cache-storage`-CachelocalStorage/sessionStoragereads-`js-combine-iterations`-Combinemultiplefilter/mapintooneloop-`js-length-check-first`-Checkarraylengthbeforeexpensivecomparison-`js-early-exit`-Returnearlyfromfunctions-`js-hoist-regexp`-HoistRegExpcreationoutsideloops-`js-min-max-loop`-Useloopformin/maxinsteadofsort-`js-set-map-lookups`-UseSet/MapforO(1)lookups-`js-tosorted-immutable`-UsetoSorted()forimmutability###8.AdvancedPatterns(LOW)-`advanced-event-handler-refs`-Storeeventhandlersinrefs-`advanced-use-latest`-useLatestforstablecallbackrefs##HowtoUseReadindividualrulefilesfordetailedexplanationsandcodeexamples:```rules/async-parallel.mdrules/bundle-barrel-imports.mdrules/_sections.md```Eachrulefilecontains:-Briefexplanationofwhyitmatters-Incorrectcodeexamplewithexplanation-Correctcodeexamplewithexplanation-Additionalcontextandreferences##FullCompiledDocumentForthecompleteguidewithallrulesexpanded:`AGENTS.md`