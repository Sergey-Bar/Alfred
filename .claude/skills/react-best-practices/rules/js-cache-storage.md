---title:CacheStorageAPICallsimpact:LOW-MEDIUMimpactDescription:reducesexpensiveI/Otags:javascript,localStorage,storage,caching,performance---##CacheStorageAPICalls`localStorage`,`sessionStorage`,and`document.cookie`aresynchronousandexpensive.Cachereadsinmemory.**Incorrect(readsstorageoneverycall):**```typescriptfunctiongetTheme(){returnlocalStorage.getItem('theme')??'light'}//Called10times=10storagereads```**Correct(Mapcache):**```typescriptconststorageCache=newMap<string,string|null>()functiongetLocalStorage(key:string){if(!storageCache.has(key)){storageCache.set(key,localStorage.getItem(key))}returnstorageCache.get(key)}functionsetLocalStorage(key:string,value:string){localStorage.setItem(key,value)storageCache.set(key,value)//keepcacheinsync}```UseaMap(notahook)soitworkseverywhere:utilities,eventhandlers,notjustReactcomponents.**Cookiecaching:**```typescriptletcookieCache:Record<string,string>|null=nullfunctiongetCookie(name:string){if(!cookieCache){cookieCache=Object.fromEntries(document.cookie.split(';').map(c=>c.split('=')))}returncookieCache[name]}```**Important(invalidateonexternalchanges):**Ifstoragecanchangeexternally(anothertab,server-setcookies),invalidatecache:```typescriptwindow.addEventListener('storage',(e)=>{if(e.key)storageCache.delete(e.key)})document.addEventListener('visibilitychange',()=>{if(document.visibilityState==='visible'){storageCache.clear()}})```