---title:DeduplicateGlobalEventListenersimpact:LOWimpactDescription:singlelistenerforNcomponentstags:client,swr,event-listeners,subscription---##DeduplicateGlobalEventListenersUse`useSWRSubscription()`toshareglobaleventlistenersacrosscomponentinstances.**Incorrect(Ninstances=Nlisteners):**```tsxfunctionuseKeyboardShortcut(key:string,callback:()=>void){useEffect(()=>{consthandler=(e:KeyboardEvent)=>{if(e.metaKey&&e.key===key){callback()}}window.addEventListener('keydown',handler)return()=>window.removeEventListener('keydown',handler)},[key,callback])}```Whenusingthe`useKeyboardShortcut`hookmultipletimes,eachinstancewillregisteranewlistener.**Correct(Ninstances=1listener):**```tsximportuseSWRSubscriptionfrom'swr/subscription'//Module-levelMaptotrackcallbacksperkeyconstkeyCallbacks=newMap<string,Set<()=>void>>()functionuseKeyboardShortcut(key:string,callback:()=>void){//RegisterthiscallbackintheMapuseEffect(()=>{if(!keyCallbacks.has(key)){keyCallbacks.set(key,newSet())}keyCallbacks.get(key)!.add(callback)return()=>{constset=keyCallbacks.get(key)if(set){set.delete(callback)if(set.size===0){keyCallbacks.delete(key)}}}},[key,callback])useSWRSubscription('global-keydown',()=>{consthandler=(e:KeyboardEvent)=>{if(e.metaKey&&keyCallbacks.has(e.key)){keyCallbacks.get(e.key)!.forEach(cb=>cb())}}window.addEventListener('keydown',handler)return()=>window.removeEventListener('keydown',handler)})}functionProfile(){//MultipleshortcutswillsharethesamelisteneruseKeyboardShortcut('p',()=>{/*...*/})useKeyboardShortcut('k',()=>{/*...*/})//...}```