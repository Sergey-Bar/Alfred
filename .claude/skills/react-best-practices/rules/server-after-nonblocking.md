---title:Useafter()forNon-BlockingOperationsimpact:MEDIUMimpactDescription:fasterresponsetimestags:server,async,logging,analytics,side-effects---##Useafter()forNon-BlockingOperationsUseNext.js's`after()`toscheduleworkthatshouldexecuteafteraresponseissent.Thispreventslogging,analytics,andothersideeffectsfromblockingtheresponse.**Incorrect(blocksresponse):**```tsximport{logUserAction}from'@/app/utils'exportasyncfunctionPOST(request:Request){//PerformmutationawaitupdateDatabase(request)//LoggingblockstheresponseconstuserAgent=request.headers.get('user-agent')||'unknown'awaitlogUserAction({userAgent})returnnewResponse(JSON.stringify({status:'success'}),{status:200,headers:{'Content-Type':'application/json'}})}```**Correct(non-blocking):**```tsximport{after}from'next/server'import{headers,cookies}from'next/headers'import{logUserAction}from'@/app/utils'exportasyncfunctionPOST(request:Request){//PerformmutationawaitupdateDatabase(request)//Logafterresponseissentafter(async()=>{constuserAgent=(awaitheaders()).get('user-agent')||'unknown'constsessionCookie=(awaitcookies()).get('session-id')?.value||'anonymous'logUserAction({sessionCookie,userAgent})})returnnewResponse(JSON.stringify({status:'success'}),{status:200,headers:{'Content-Type':'application/json'}})}```Theresponseissentimmediatelywhilelogginghappensinthebackground.**Commonusecases:**-Analyticstracking-Auditlogging-Sendingnotifications-Cacheinvalidation-Cleanuptasks**Importantnotes:**-`after()`runseveniftheresponsefailsorredirects-WorksinServerActions,RouteHandlers,andServerComponentsReference:[https://nextjs.org/docs/app/api-reference/functions/after](https://nextjs.org/docs/app/api-reference/functions/after)