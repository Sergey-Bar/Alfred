#!/usr/bin/envpython3"""RICEPrioritizationFrameworkCalculatesRICEscoresforfeatureprioritizationRICE=(ReachxImpactxConfidence)/Effort"""importjsonimportcsvfromtypingimportList,Dict,TupleimportargparseclassRICECalculator:"""CalculateRICEscoresforfeatureprioritization"""def__init__(self):self.impact_map={'massive':3.0,'high':2.0,'medium':1.0,'low':0.5,'minimal':0.25}self.confidence_map={'high':100,'medium':80,'low':50}self.effort_map={'xl':13,'l':8,'m':5,'s':3,'xs':1}defcalculate_rice(self,reach:int,impact:str,confidence:str,effort:str)->float:"""CalculateRICEscoreArgs:reach:Numberofusers/customersaffectedperquarterimpact:massive/high/medium/low/minimalconfidence:high/medium/low(percentage)effort:xl/l/m/s/xs(person-months)"""impact_score=self.impact_map.get(impact.lower(),1.0)confidence_score=self.confidence_map.get(confidence.lower(),50)/100effort_score=self.effort_map.get(effort.lower(),5)ifeffort_score==0:return0rice_score=(reach*impact_score*confidence_score)/effort_scorereturnround(rice_score,2)defprioritize_features(self,features:List[Dict])->List[Dict]:"""CalculateRICEscoresandrankfeaturesArgs:features:ListoffeaturedictionarieswithRICEcomponents"""forfeatureinfeatures:feature['rice_score']=self.calculate_rice(feature.get('reach',0),feature.get('impact','medium'),feature.get('confidence','medium'),feature.get('effort','m'))#SortbyRICEscoredescendingreturnsorted(features,key=lambdax:x['rice_score'],reverse=True)defanalyze_portfolio(self,features:List[Dict])->Dict:"""Analyzethefeatureportfolioforbalanceandinsights"""ifnotfeatures:return{}total_effort=sum(self.effort_map.get(f.get('effort','m').lower(),5)forfinfeatures)total_reach=sum(f.get('reach',0)forfinfeatures)effort_distribution={}impact_distribution={}forfeatureinfeatures:effort=feature.get('effort','m').lower()impact=feature.get('impact','medium').lower()effort_distribution[effort]=effort_distribution.get(effort,0)+1impact_distribution[impact]=impact_distribution.get(impact,0)+1#Calculatequickwins(highimpact,loweffort)quick_wins=[fforfinfeaturesiff.get('impact','').lower()in['massive','high']andf.get('effort','').lower()in['xs','s']]#Calculatebigbets(highimpact,higheffort)big_bets=[fforfinfeaturesiff.get('impact','').lower()in['massive','high']andf.get('effort','').lower()in['l','xl']]return{'total_features':len(features),'total_effort_months':total_effort,'total_reach':total_reach,'average_rice':round(sum(f['rice_score']forfinfeatures)/len(features),2),'effort_distribution':effort_distribution,'impact_distribution':impact_distribution,'quick_wins':len(quick_wins),'big_bets':len(big_bets),'quick_wins_list':quick_wins[:3],#Top3quickwins'big_bets_list':big_bets[:3]#Top3bigbets}defgenerate_roadmap(self,features:List[Dict],team_capacity:int=10)->List[Dict]:"""GenerateaquarterlyroadmapbasedonteamcapacityArgs:features:Prioritizedfeaturelistteam_capacity:Person-monthsavailableperquarter"""quarters=[]current_quarter={'quarter':1,'features':[],'capacity_used':0,'capacity_available':team_capacity}forfeatureinfeatures:effort=self.effort_map.get(feature.get('effort','m').lower(),5)ifcurrent_quarter['capacity_used']+effort<=team_capacity:current_quarter['features'].append(feature)current_quarter['capacity_used']+=effortelse:#Movetonextquartercurrent_quarter['capacity_available']=team_capacity-current_quarter['capacity_used']quarters.append(current_quarter)current_quarter={'quarter':len(quarters)+1,'features':[feature],'capacity_used':effort,'capacity_available':team_capacity-effort}ifcurrent_quarter['features']:current_quarter['capacity_available']=team_capacity-current_quarter['capacity_used']quarters.append(current_quarter)returnquartersdefformat_output(features:List[Dict],analysis:Dict,roadmap:List[Dict])->str:"""Formattheresultsfordisplay"""output=["="*60]output.append("RICEPRIORITIZATIONRESULTS")output.append("="*60)#Topprioritizedfeaturesoutput.append("\nðŸ“ŠTOPPRIORITIZEDFEATURES\n")fori,featureinenumerate(features[:10],1):output.append(f"{i}.{feature.get('name','Unnamed')}")output.append(f"RICEScore:{feature['rice_score']}")output.append(f"Reach:{feature.get('reach',0)}|Impact:{feature.get('impact','medium')}|"f"Confidence:{feature.get('confidence','medium')}|Effort:{feature.get('effort','m')}")output.append("")#Portfolioanalysisoutput.append("\nðŸ“ˆPORTFOLIOANALYSIS\n")output.append(f"TotalFeatures:{analysis.get('total_features',0)}")output.append(f"TotalEffort:{analysis.get('total_effort_months',0)}person-months")output.append(f"TotalReach:{analysis.get('total_reach',0):,}users")output.append(f"AverageRICEScore:{analysis.get('average_rice',0)}")output.append(f"\nðŸŽ¯QuickWins:{analysis.get('quick_wins',0)}features")forqwinanalysis.get('quick_wins_list',[]):output.append(f"â€¢{qw.get('name','Unnamed')}(RICE:{qw['rice_score']})")output.append(f"\nðŸš€BigBets:{analysis.get('big_bets',0)}features")forbbinanalysis.get('big_bets_list',[]):output.append(f"â€¢{bb.get('name','Unnamed')}(RICE:{bb['rice_score']})")#Roadmapoutput.append("\n\nðŸ“…SUGGESTEDROADMAP\n")forquarterinroadmap:output.append(f"\nQ{quarter['quarter']}-Capacity:{quarter['capacity_used']}/{quarter['capacity_used']+quarter['capacity_available']}person-months")forfeatureinquarter['features']:output.append(f"â€¢{feature.get('name','Unnamed')}(RICE:{feature['rice_score']})")return"\n".join(output)defload_features_from_csv(filepath:str)->List[Dict]:"""LoadfeaturesfromCSVfile"""features=[]withopen(filepath,'r')asf:reader=csv.DictReader(f)forrowinreader:feature={'name':row.get('name',''),'reach':int(row.get('reach',0)),'impact':row.get('impact','medium'),'confidence':row.get('confidence','medium'),'effort':row.get('effort','m'),'description':row.get('description','')}features.append(feature)returnfeaturesdefcreate_sample_csv(filepath:str):"""CreateasampleCSVfilefortesting"""sample_features=[['name','reach','impact','confidence','effort','description'],['UserDashboardRedesign','5000','high','high','l','Completeredesignofuserdashboard'],['MobilePushNotifications','10000','massive','medium','m','Addpushnotificationsupport'],['DarkMode','8000','medium','high','s','Implementdarkmodetheme'],['APIRateLimiting','2000','low','high','xs','AddratelimitingtoAPI'],['SocialLogin','12000','high','medium','m','AddGoogle/Facebooklogin'],['ExporttoPDF','3000','medium','low','s','ExportreportsasPDF'],['TeamCollaboration','4000','massive','low','xl','Real-timecollaborationfeatures'],['SearchImprovements','15000','high','high','m','Enhancesearchfunctionality'],['OnboardingFlow','20000','massive','high','s','Improvenewuseronboarding'],['AnalyticsDashboard','6000','high','medium','l','Advancedanalyticsforusers'],]withopen(filepath,'w',newline='')asf:writer=csv.writer(f)writer.writerows(sample_features)print(f"SampleCSVcreatedat:{filepath}")defmain():parser=argparse.ArgumentParser(description='RICEFrameworkforFeaturePrioritization')parser.add_argument('input',nargs='?',help='CSVfilewithfeaturesor"sample"tocreatesample')parser.add_argument('--capacity',type=int,default=10,help='Teamcapacityperquarter(person-months)')parser.add_argument('--output',choices=['text','json','csv'],default='text',help='Outputformat')args=parser.parse_args()#Createsampleifrequestedifargs.input=='sample':create_sample_csv('sample_features.csv')return#Usesampledataifnoinputprovidedifnotargs.input:features=[{'name':'UserDashboard','reach':5000,'impact':'high','confidence':'high','effort':'l'},{'name':'PushNotifications','reach':10000,'impact':'massive','confidence':'medium','effort':'m'},{'name':'DarkMode','reach':8000,'impact':'medium','confidence':'high','effort':'s'},{'name':'APIRateLimiting','reach':2000,'impact':'low','confidence':'high','effort':'xs'},{'name':'SocialLogin','reach':12000,'impact':'high','confidence':'medium','effort':'m'},]else:features=load_features_from_csv(args.input)#CalculateRICEscorescalculator=RICECalculator()prioritized=calculator.prioritize_features(features)analysis=calculator.analyze_portfolio(prioritized)roadmap=calculator.generate_roadmap(prioritized,args.capacity)#Outputresultsifargs.output=='json':result={'features':prioritized,'analysis':analysis,'roadmap':roadmap}print(json.dumps(result,indent=2))elifargs.output=='csv':#OutputprioritizedfeaturesasCSVifprioritized:keys=prioritized[0].keys()print(','.join(keys))forfeatureinprioritized:print(','.join(str(feature.get(k,''))forkinkeys))else:print(format_output(prioritized,analysis,roadmap))if__name__=="__main__":main()