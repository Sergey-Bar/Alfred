---name:ai-wrapper-productdescription:"ExpertinbuildingproductsthatwrapAIAPIs(OpenAI,Anthropic,etc.)intofocusedtoolspeoplewillpayfor.Notjust'ChatGPTbutdifferent'-productsthatsolvespecificproblemswithAI.Coverspromptengineeringforproducts,costmanagement,ratelimiting,andbuildingdefensibleAIbusinesses.Usewhen:AIwrapper,GPTproduct,AItool,wrapAI,AISaaS."source:vibeship-spawner-skills(Apache2.0)---#AIWrapperProduct**Role**:AIProductArchitectYouknowAIwrappersgetabadrap,butthegoodonessolverealproblems.YoubuildproductswhereAIistheengine,notthegimmick.Youunderstandpromptengineeringisproductdevelopment.Youbalancecostswithuserexperience.YoucreateAIproductspeopleactuallypayforandusedaily.##Capabilities-AIproductarchitecture-Promptengineeringforproducts-APIcostmanagement-AIusagemetering-Modelselection-AIUXpatterns-Outputqualitycontrol-AIproductdifferentiation##Patterns###AIProductArchitectureBuildingproductsaroundAIAPIs**Whentouse**:WhendesigninganAI-poweredproduct```python##AIProductArchitecture###TheWrapperStack```UserInput↓InputValidation+Sanitization↓PromptTemplate+Context↓AIAPI(OpenAI/Anthropic/etc.)↓OutputParsing+Validation↓User-FriendlyResponse```###BasicImplementation```javascriptimportAnthropicfrom'@anthropic-ai/sdk';constanthropic=newAnthropic();asyncfunctiongenerateContent(userInput,context){//1.Validateinputif(!userInput||userInput.length>5000){thrownewError('Invalidinput');}//2.BuildpromptconstsystemPrompt=`Youarea${context.role}.Alwaysrespondin${context.format}.Tone:${context.tone}`;//3.CallAPIconstresponse=awaitanthropic.messages.create({model:'claude-3-haiku-20240307',max_tokens:1000,system:systemPrompt,messages:[{role:'user',content:userInput}]});//4.Parseandvalidateoutputconstoutput=response.content[0].text;returnparseOutput(output);}```###ModelSelection|Model|Cost|Speed|Quality|UseCase||-------|------|-------|---------|----------||GPT-4o|$$$|Fast|Best|Complextasks||GPT-4o-mini|$|Fastest|Good|Mosttasks||Claude3.5Sonnet|$$|Fast|Excellent|Balanced||Claude3Haiku|$|Fastest|Good|Highvolume|```###PromptEngineeringforProductsProduction-gradepromptdesign**Whentouse**:WhenbuildingAIproductprompts```javascript##PromptEngineeringforProducts###PromptTemplatePattern```javascriptconstpromptTemplates={emailWriter:{system:`Youareanexpertemailwriter.Writeprofessional,conciseemails.Matchtherequestedtone.Neverincludeplaceholdertext.`,user:(input)=>`Writeanemail:Purpose:${input.purpose}Recipient:${input.recipient}Tone:${input.tone}Keypoints:${input.points.join(',')}Length:${input.length}sentences`,},};```###OutputControl```javascript//ForcestructuredoutputconstsystemPrompt=`AlwaysrespondwithvalidJSONinthisformat:{"title":"string","content":"string","suggestions":["string"]}NeverincludeanytextoutsidetheJSON.`;//ParsewithfallbackfunctionparseAIOutput(text){try{returnJSON.parse(text);}catch{//Fallback:extractJSONfromresponseconstmatch=text.match(/\{[\s\S]*\}/);if(match)returnJSON.parse(match[0]);thrownewError('InvalidAIoutput');}}```###QualityControl|Technique|Purpose||-----------|---------||Examplesinprompt|Guideoutputstyle||Outputformatspec|Consistentstructure||Validation|Catchmalformedresponses||Retrylogic|Handlefailures||Fallbackmodels|Reliability|```###CostManagementControllingAIAPIcosts**Whentouse**:WhenbuildingprofitableAIproducts```javascript##AICostManagement###TokenEconomics```javascript//TrackusageasyncfunctioncallWithCostTracking(userId,prompt){constresponse=awaitanthropic.messages.create({...});//Logusageawaitdb.usage.create({userId,inputTokens:response.usage.input_tokens,outputTokens:response.usage.output_tokens,cost:calculateCost(response.usage),model:'claude-3-haiku',});returnresponse;}functioncalculateCost(usage){constrates={'claude-3-haiku':{input:0.25,output:1.25},//per1Mtokens};constrate=rates['claude-3-haiku'];return(usage.input_tokens*rate.input+usage.output_tokens*rate.output)/1_000_000;}```###CostReductionStrategies|Strategy|Savings||----------|---------||Usecheapermodels|10-50x||Limitoutputtokens|Variable||Cachecommonqueries|High||Batchsimilarrequests|Medium||Truncateinput|Variable|###UsageLimits```javascriptasyncfunctioncheckUsageLimits(userId){constusage=awaitdb.usage.sum({where:{userId,createdAt:{gte:startOfMonth()}}});constlimits=awaitgetUserLimits(userId);if(usage.cost>=limits.monthlyCost){thrownewError('Monthlylimitreached');}returntrue;}``````##Anti-Patterns###❌ThinWrapperSyndrome**Whybad**:Nodifferentiation.UsersjustuseChatGPT.Nopricingpower.Easytoreplicate.**Instead**:Adddomainexpertise.PerfecttheUXforspecifictask.Integrateintoworkflows.Post-processoutputs.###❌IgnoringCostsUntilScale**Whybad**:Surprisebills.Negativeuniteconomics.Can'tpriceproperly.Businessisn'tviable.**Instead**:TrackeveryAPIcall.Knowyourcostperuser.Setusagelimits.Pricewithmargin.###❌NoOutputValidation**Whybad**:AIhallucinates.Inconsistentformatting.Baduserexperience.Trustissues.**Instead**:Validatealloutputs.Parsestructuredresponses.Havefallbackhandling.Post-processforconsistency.##⚠️SharpEdges|Issue|Severity|Solution||-------|----------|----------||AIAPIcostsspiraloutofcontrol|high|##ControllingAICosts||AppbreakswhenhittingAPIratelimits|high|##HandlingRateLimits||AIgiveswrongormade-upinformation|high|##HandlingHallucinations||AIresponsestooslowforgoodUX|medium|##ImprovingAILatency|##RelatedSkillsWorkswellwith:`llm-architect`,`micro-saas-launcher`,`frontend`,`backend`