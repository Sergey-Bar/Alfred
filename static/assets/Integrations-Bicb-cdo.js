import{f as k,j as e,d as S,c as I}from"./index-BYTAyHyu.js";import{r as n}from"./vendor-CoKE50sv.js";import{F as T}from"./TrashIcon-CJadKJXF.js";import{F as C}from"./PlusIcon-CvPvxy5e.js";function A({title:r,titleId:l,...i},c){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":l},i),r?n.createElement("title",{id:l},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const R=n.forwardRef(A),M=[{id:"make",name:"Make (Integromat)",description:"Connect to Make.com for workflow automation",icon:"ðŸ”§",fields:[{name:"webhook_url",label:"Webhook URL",type:"url",placeholder:"https://hook.make.com/..."}]},{id:"slack",name:"Slack",description:"Send notifications to Slack channels",icon:"ðŸ’¬",fields:[{name:"webhook_url",label:"Webhook URL",type:"url",placeholder:"https://hooks.slack.com/services/..."},{name:"channel",label:"Channel",type:"text",placeholder:"#general"}]},{id:"teams",name:"Microsoft Teams",description:"Send notifications to Teams channels",icon:"ðŸ‘¥",fields:[{name:"webhook_url",label:"Webhook URL",type:"url",placeholder:"https://outlook.office.com/webhook/..."}]},{id:"telegram",name:"Telegram",description:"Send notifications via Telegram bot",icon:"âœˆï¸",fields:[{name:"bot_token",label:"Bot Token",type:"password",placeholder:"123456789:ABC..."},{name:"chat_id",label:"Chat ID",type:"text",placeholder:"-1001234567890"}]},{id:"whatsapp",name:"WhatsApp",description:"Send notifications via WhatsApp Business API",icon:"ðŸ“±",fields:[{name:"api_url",label:"API URL",type:"url",placeholder:"https://api.whatsapp.com/..."},{name:"api_key",label:"API Key",type:"password",placeholder:"Your API key"},{name:"phone_number",label:"Phone Number",type:"tel",placeholder:"+1234567890"}]}];function $(){const{showToast:r}=k(),[l,i]=n.useState(()=>{const t=localStorage.getItem("alfred_integrations");return t?JSON.parse(t):[]}),[c,d]=n.useState(!1),[o,m]=n.useState(null),[x,p]=n.useState({}),[u,b]=n.useState(null);n.useEffect(()=>{localStorage.setItem("alfred_integrations",JSON.stringify(l))},[l]);const g=t=>{m(t);const s={};t.fields.forEach(a=>{s[a.name]=""}),s.enabled=!0,p(s),d(!0)},y=t=>{t.preventDefault();const s={id:Date.now().toString(),type:o.id,name:o.name,icon:o.icon,config:{...x},status:"pending",lastTested:null};i(a=>[...a,s]),r({type:"success",title:"Integration Added",message:`${o.name} integration has been added`}),d(!1),m(null)},j=t=>{i(s=>s.filter(a=>a.id!==t)),r({type:"success",title:"Integration Removed",message:"Integration has been removed"})},w=t=>{i(s=>s.map(a=>a.id===t?{...a,config:{...a.config,enabled:!a.config.enabled}}:a))},N=async t=>{b(t.id),await new Promise(a=>setTimeout(a,2e3));const s=Math.random()>.3;i(a=>a.map(h=>h.id===t.id?{...h,status:s?"connected":"error",lastTested:new Date().toISOString()}:h)),r(s?{type:"success",title:"Connection Successful",message:`${t.name} is connected and working`}:{type:"error",title:"Connection Failed",message:`Failed to connect to ${t.name}. Please check your credentials.`}),b(null)},v=t=>{switch(t){case"connected":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-900/40 text-green-400",children:[e.jsx(I,{className:"h-3.5 w-3.5 mr-1"}),"Connected"]});case"error":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-900/40 text-red-400",children:[e.jsx(S,{className:"h-3.5 w-3.5 mr-1"}),"Error"]});default:return e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-900/40 text-yellow-400",children:"Pending Test"})}},f=M.filter(t=>!l.some(s=>s.type===t.id));return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Integrations"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Connect Alfred with external services for notifications and automation"})]}),l.length>0&&e.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-sm border border-gray-700 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Connected Integrations"}),e.jsx("div",{className:"space-y-4",children:l.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg border border-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-2xl",children:t.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:t.name}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[v(t.status),t.lastTested&&e.jsxs("span",{className:"text-xs text-gray-400",children:["Last tested: ",new Date(t.lastTested).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>w(t.id),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${t.config.enabled?"bg-[#1d3557]":"bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t.config.enabled?"translate-x-6":"translate-x-1"}`})}),e.jsx("button",{onClick:()=>N(t),disabled:u===t.id,className:"p-2 text-gray-400 hover:text-blue-400 transition-colors disabled:opacity-50",title:"Test connection",children:e.jsx(R,{className:`h-5 w-5 ${u===t.id?"animate-spin":""}`})}),e.jsx("button",{onClick:()=>j(t.id),className:"p-2 text-gray-400 hover:text-red-400 transition-colors",title:"Remove integration",children:e.jsx(T,{className:"h-5 w-5"})})]})]},t.id))})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-sm border border-gray-700 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:l.length>0?"Add More Integrations":"Available Integrations"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(t=>e.jsxs("button",{onClick:()=>g(t),className:"flex items-start p-4 bg-gray-700/30 hover:bg-gray-700/60 rounded-lg border border-gray-600 hover:border-blue-500 transition-all text-left group",children:[e.jsx("span",{className:"text-3xl mr-4",children:t.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-white group-hover:text-blue-400 transition-colors",children:t.name}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:t.description})]}),e.jsx(C,{className:"h-5 w-5 text-gray-400 group-hover:text-blue-400 transition-colors"})]},t.id))}),f.length===0&&e.jsx("p",{className:"text-center text-gray-400 py-4",children:"All available integrations have been added"})]}),c&&o&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-xl w-full max-w-md p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("span",{className:"text-3xl",children:o.icon}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:o.name}),e.jsx("p",{className:"text-sm text-gray-400",children:o.description})]})]}),e.jsxs("form",{onSubmit:y,children:[e.jsx("div",{className:"space-y-4",children:o.fields.map(t=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-1",children:t.label}),e.jsx("input",{type:t.type,className:"input w-full",placeholder:t.placeholder,value:x[t.name]||"",onChange:s=>p({...x,[t.name]:s.target.value}),required:!0})]},t.name))}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{d(!1),m(null)},className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Add Integration"})]})]})]})})]})}export{$ as default};
