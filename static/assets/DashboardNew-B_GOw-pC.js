import{j as e,F as I,u as V,a as R,b as E,c as Q,d as X,e as v}from"./index-BYTAyHyu.js";import{r,u as J}from"./vendor-CoKE50sv.js";import{F as Z,a as H}from"./ChartBarIcon-DrjqaP5B.js";import{R as $,A as B,C as O,X as L,Y as M,T as D,a as Y,P as ee,b as te,c as se}from"./charts-B-8BX82p.js";import{F as ae}from"./ClockIcon-DqX5lot2.js";import{F as re}from"./ArrowRightIcon-DPPo99DE.js";function oe({title:s,titleId:t,...o},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},o),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const le=r.forwardRef(oe);function ne({title:s,titleId:t,...o},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},o),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ie=r.forwardRef(ne),ce=[{label:"Last 7 days",value:"7d",days:7},{label:"Last 30 days",value:"30d",days:30},{label:"This month",value:"month",days:0},{label:"This year",value:"year",days:0},{label:"Last year",value:"lastyear",days:0}];function f(s){const t=s.getDate().toString().padStart(2,"0"),o=(s.getMonth()+1).toString().padStart(2,"0"),l=s.getFullYear().toString().slice(-2);return`${t}.${o}.${l}`}function P(s){const t=new Date;return s.getDate()===t.getDate()&&s.getMonth()===t.getMonth()&&s.getFullYear()===t.getFullYear()}function de({value:s,onChange:t,className:o=""}){const[l,c]=r.useState(!1),[d,h]=r.useState(s||"year"),[g,b]=r.useState(new Date().getFullYear()),p=r.useRef(null),u=new Date().getFullYear(),w=Array.from({length:5},(a,m)=>u-m);r.useEffect(()=>{function a(m){p.current&&!p.current.contains(m.target)&&c(!1)}return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const _=a=>{h(a.value),t&&t({range:a.value,days:a.days,year:a.value==="lastyear"?u-1:u}),c(!1)},k=a=>{b(a),h("custom"),t&&t({range:"custom",year:a}),c(!1)},F=()=>{const a=new Date,m=P(a)?"Today":f(a);if(d==="7d"){const x=new Date(a.getTime()-6048e5);return`${f(x)}-${m}`}if(d==="30d"){const x=new Date(a.getTime()-2592e6);return`${f(x)}-${m}`}if(d==="month"){const x=new Date(a.getFullYear(),a.getMonth(),1);return`${f(x)}-${m}`}if(d==="year"){const x=new Date(u,0,1);return`${f(x)}-${m}`}if(d==="lastyear"){const x=new Date(u-1,0,1),y=new Date(u-1,11,31);return`${f(x)}-${f(y)}`}if(d==="custom"){const x=new Date(g,0,1),y=g===u?a:new Date(g,11,31),T=P(y)?"Today":f(y);return`${f(x)}-${T}`}return"Select range"};return e.jsxs("div",{className:`relative ${o}`,ref:p,children:[e.jsxs("button",{onClick:()=>c(!l),className:"flex items-center space-x-2 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors shadow-sm",children:[e.jsx(le,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}),e.jsx("span",{className:"text-gray-800 dark:text-gray-200 font-medium",children:F()}),e.jsx(I,{className:`h-4 w-4 text-gray-500 dark:text-gray-400 transition-transform ${l?"rotate-180":""}`})]}),l&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:[e.jsxs("div",{className:"p-2",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 px-2 mb-2 font-medium",children:"Quick Select"}),ce.map(a=>e.jsx("button",{onClick:()=>_(a),className:`w-full text-left px-3 py-2 text-sm rounded-lg transition-colors ${d===a.value?"bg-[#1d3557] text-white":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:a.label},a.value))]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-2",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 px-2 mb-2 font-medium",children:"Select Year"}),e.jsx("div",{className:"flex flex-wrap gap-2 px-2",children:w.map(a=>e.jsx("button",{onClick:()=>k(a),className:`px-3 py-1 text-sm rounded-lg transition-colors ${g===a&&d==="custom"?"bg-[#1d3557] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:a},a))})]})]})]})}const U=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"];function N({title:s,value:t,icon:o,color:l="blue",trend:c,onClick:d,subtitle:h,clickable:g=!0}){const b={blue:"bg-blue-900/50 text-blue-400",green:"bg-green-900/50 text-green-400",yellow:"bg-yellow-900/50 text-yellow-400",red:"bg-red-900/50 text-red-400",purple:"bg-purple-900/50 text-purple-400"},p=g?"cursor-pointer hover:shadow-lg hover:scale-[1.02] hover:border-blue-500":"";return e.jsxs("div",{onClick:g?d:void 0,className:`stat-card transition-all duration-200 border-2 border-transparent ${p} group`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`p-2 rounded-lg ${b[l]} transition-transform group-hover:scale-110`,children:e.jsx(o,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[c!==void 0&&e.jsxs("span",{className:`text-sm font-medium ${c>0?"text-green-600":c<0?"text-red-600":"text-gray-500"}`,children:[c>0?"+":"",c,"%"]}),g&&e.jsx(re,{className:"h-4 w-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"stat-value",children:t}),e.jsx("p",{className:"stat-label",children:s}),h&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h})]})]})}function A({icon:s,label:t,onClick:o,color:l="blue"}){const c={blue:"bg-blue-900/40 text-blue-300 hover:bg-blue-900/60 border border-blue-800",green:"bg-green-900/40 text-green-300 hover:bg-green-900/60 border border-green-800",purple:"bg-purple-900/40 text-purple-300 hover:bg-purple-900/60 border border-purple-800"};return e.jsxs("button",{onClick:o,className:`flex items-center px-4 py-2 rounded-lg text-sm font-semibold transition-colors shadow-sm ${c[l]}`,children:[e.jsx(s,{className:"h-4 w-4 mr-2"}),t]})}function K(s){if(!s)return"";const t=new Date(s),o=t.getDate().toString().padStart(2,"0"),l=(t.getMonth()+1).toString().padStart(2,"0");return`${o}.${l}`}function W(s){if(!s)return"";const t=new Date(s),o=t.getDate().toString().padStart(2,"0"),l=(t.getMonth()+1).toString().padStart(2,"0"),c=t.getFullYear();return`${o}.${l}.${c}`}function be(){const s=J(),{darkMode:t}=V(),[o,l]=r.useState(null),[c,d]=r.useState([]),[h,g]=r.useState([]),[b,p]=r.useState([]),[u,w]=r.useState(null),[_,k]=r.useState(!0),[F,a]=r.useState(null),[m,x]=r.useState({range:"year",year:new Date().getFullYear()});return r.useEffect(()=>{async function n(){try{k(!0);const i=m.range==="7d"?7:m.range==="30d"?30:365,[C,j,q,z,G]=await Promise.all([v.getOverview(),v.getCostTrends(i),v.getModelUsage(),v.getLeaderboard(10),v.getApprovalStats()]);l(C),d(j.map(S=>({...S,displayDate:K(S.date),fullDate:W(S.date)}))),g(q),p(z),w(G)}catch(i){a(i.message),l({total_users:25,total_teams:5,total_tokens_used:15e4,total_cost:1250.5,active_users_today:18,pending_approvals:3}),d([{date:"2026-02-06",total_tokens:5e3,total_cost:42.5},{date:"2026-02-07",total_tokens:7500,total_cost:63.75},{date:"2026-02-08",total_tokens:6200,total_cost:52.7},{date:"2026-02-09",total_tokens:8100,total_cost:68.85},{date:"2026-02-10",total_tokens:9500,total_cost:80.75},{date:"2026-02-11",total_tokens:7800,total_cost:66.3},{date:"2026-02-12",total_tokens:8900,total_cost:75.65}].map(j=>({...j,displayDate:K(j.date),fullDate:W(j.date)}))),g([{model:"gpt-4",request_count:450,total_tokens:9e4,total_cost:720},{model:"gpt-3.5-turbo",request_count:1200,total_tokens:45e3,total_cost:67.5},{model:"claude-3-opus",request_count:200,total_tokens:4e4,total_cost:480}]),p([{user_id:"1",user_name:"Alice Johnson",user_email:"alice@example.com",efficiency_score:.95},{user_id:"2",user_name:"Bob Smith",user_email:"bob@example.com",efficiency_score:.88},{user_id:"3",user_name:"Carol Williams",user_email:"carol@example.com",efficiency_score:.82}]),w({total_pending:3,total_approved:45,total_denied:8,avg_approval_time_hours:2.5})}finally{k(!1)}}n()},[m]),_?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#1d3557]"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Dashboard"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Overview of your Alfred token usage and quotas"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(de,{value:m.range,onChange:x})})]}),F&&e.jsx("div",{className:"mb-4 p-3 bg-yellow-900/30 text-yellow-400 rounded-lg text-sm",children:"Using demo data - API connection issue"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.jsx(A,{icon:R,label:"Add User",onClick:()=>s("/users"),color:"blue"}),e.jsx(A,{icon:E,label:"Create Team",onClick:()=>s("/teams"),color:"green"}),e.jsx(A,{icon:Z,label:"View Reports",onClick:()=>s("/transfers"),color:"purple"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-8",children:[e.jsx(N,{title:"Total Users",value:o?.total_users||0,icon:R,color:"blue",trend:12,subtitle:"Click to manage users",onClick:()=>s("/users")}),e.jsx(N,{title:"Tokens Used",value:(o?.total_tokens_used||0).toLocaleString(),icon:H,color:"green",trend:8,subtitle:"Click for detailed breakdown",onClick:()=>s("/transfers")}),e.jsx(N,{title:"Total Cost",value:`$${(o?.total_cost||0).toFixed(2)}`,icon:ie,color:"yellow",trend:-3,subtitle:"Click for cost analysis",onClick:()=>s("/transfers")}),e.jsx(N,{title:"Active Teams",value:o?.total_teams||0,icon:E,color:"purple",subtitle:"Click to manage teams",onClick:()=>s("/teams")})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 mb-8",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Token Usage Trend"})}),e.jsx($,{width:"100%",height:300,children:e.jsxs(B,{data:c,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorTokens",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]})}),e.jsx(O,{strokeDasharray:"3 3",stroke:t?"#374151":"#f0f0f0"}),e.jsx(L,{dataKey:"displayDate",tick:{fontSize:12,fill:t?"#9CA3AF":"#6B7280"}}),e.jsx(M,{tick:{fontSize:12,fill:t?"#9CA3AF":"#6B7280"}}),e.jsx(D,{contentStyle:{backgroundColor:t?"#1F2937":"#ffffff",border:`1px solid ${t?"#374151":"#E5E7EB"}`,borderRadius:"8px",color:t?"#F3F4F6":"#111827"},labelStyle:{color:t?"#F3F4F6":"#111827",fontWeight:600},itemStyle:{color:t?"#9CA3AF":"#4B5563"},formatter:(n,i,C)=>[n.toLocaleString(),"Tokens"],labelFormatter:(n,i)=>i?.[0]?.payload?.fullDate?i[0].payload.fullDate:n}),e.jsx(Y,{type:"monotone",dataKey:"total_tokens",stroke:"#3B82F6",fillOpacity:1,fill:"url(#colorTokens)",name:"Tokens"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Cost Trend"})}),e.jsx($,{width:"100%",height:300,children:e.jsxs(B,{data:c,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorCost",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]})}),e.jsx(O,{strokeDasharray:"3 3",stroke:t?"#374151":"#f0f0f0"}),e.jsx(L,{dataKey:"displayDate",tick:{fontSize:12,fill:t?"#9CA3AF":"#6B7280"}}),e.jsx(M,{tick:{fontSize:12,fill:t?"#9CA3AF":"#6B7280"},tickFormatter:n=>`$${n}`}),e.jsx(D,{contentStyle:{backgroundColor:t?"#1F2937":"#ffffff",border:`1px solid ${t?"#374151":"#E5E7EB"}`,borderRadius:"8px",color:t?"#F3F4F6":"#111827"},labelStyle:{color:t?"#F3F4F6":"#111827",fontWeight:600},itemStyle:{color:t?"#9CA3AF":"#4B5563"},formatter:n=>[`$${n.toFixed(2)}`,"Cost"],labelFormatter:(n,i)=>i?.[0]?.payload?.fullDate?i[0].payload.fullDate:n}),e.jsx(Y,{type:"monotone",dataKey:"total_cost",stroke:"#10B981",fillOpacity:1,fill:"url(#colorCost)",name:"Cost"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Model Usage"}),e.jsx($,{width:"100%",height:250,children:e.jsxs(ee,{children:[e.jsx(te,{data:h,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"request_count",nameKey:"model",label:({model:n})=>n,children:h.map((n,i)=>e.jsx(se,{fill:U[i%U.length]},`cell-${i}`))}),e.jsx(D,{contentStyle:{backgroundColor:t?"#1F2937":"#ffffff",border:`1px solid ${t?"#374151":"#E5E7EB"}`,borderRadius:"8px",color:t?"#F3F4F6":"#111827"},labelStyle:{color:t?"#F3F4F6":"#111827",fontWeight:600},itemStyle:{color:t?"#9CA3AF":"#4B5563"}})]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Efficiency Leaderboard"}),e.jsx("button",{onClick:()=>s("/users"),className:"text-xs text-blue-400 hover:underline",children:"View all"})]}),e.jsx("div",{className:"space-y-3",children:b.slice(0,5).map((n,i)=>e.jsxs("div",{className:"flex items-center p-2 rounded-lg hover:bg-gray-700 cursor-pointer transition-colors",onClick:()=>s("/users"),children:[e.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold mr-3 ${i===0?"bg-yellow-900/50 text-yellow-400":i===1?"bg-gray-600 text-gray-200":i===2?"bg-orange-900/50 text-orange-400":"bg-gray-700 text-gray-400"}`,children:i+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate",children:n.user_name}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:n.user_email})]}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[(n.efficiency_score*100).toFixed(0),"%"]})]},n.user_id))})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Approval Statistics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"h-5 w-5 text-yellow-500 mr-2"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Pending"})]}),e.jsx("span",{className:"text-lg font-semibold text-white",children:u?.total_pending||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{className:"h-5 w-5 text-green-500 mr-2"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Approved"})]}),e.jsx("span",{className:"text-lg font-semibold text-white",children:u?.total_approved||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(X,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Denied"})]}),e.jsx("span",{className:"text-lg font-semibold text-white",children:u?.total_denied||0})]}),e.jsx("div",{className:"pt-3 border-t border-gray-700",children:e.jsxs("p",{className:"text-sm text-gray-400",children:["Avg. approval time: ",e.jsxs("span",{className:"font-semibold text-white",children:[u?.avg_approval_time_hours?.toFixed(1)||0,"h"]})]})})]})]})]})]})}export{be as default};
