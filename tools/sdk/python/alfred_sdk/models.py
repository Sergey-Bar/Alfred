fromdatetimeimportdatetimefromtypingimportOptional,List,Dict,AnyfromenumimportEnumfrompydanticimportBaseModel,Field#============================================================#Enums#============================================================classUserRole(str,Enum):USER="user"ADMIN="admin"TEAM_ADMIN="team_admin"SUPER_ADMIN="super_admin"classTransactionType(str,Enum):DEDUCTION="deduction"REFUND="refund"CREDIT="credit"TRANSFER_IN="transfer_in"TRANSFER_OUT="transfer_out"CHARGEBACK="chargeback"classTransferStatus(str,Enum):PENDING="pending"COMPLETED="completed"CANCELLED="cancelled"REJECTED="rejected"classPolicyAction(str,Enum):ALLOW="allow"DENY="deny"WARN="warn"AUDIT="audit"classExperimentStatus(str,Enum):DRAFT="draft"RUNNING="running"PAUSED="paused"CONCLUDED="concluded"#============================================================#CoreModels#============================================================classUser(BaseModel):"""Useraccountmodel."""id:stremail:strname:strrole:UserRole=UserRole.USERteam_id:Optional[str]=Noneis_active:bool=Truecreated_at:datetimeupdated_at:Optional[datetime]=NoneclassTeam(BaseModel):"""Team/organizationmodel."""id:strname:strdescription:Optional[str]=Noneowner_id:strmember_count:int=0created_at:datetimeupdated_at:Optional[datetime]=NoneclassWallet(BaseModel):"""Creditwalletmodel."""id:strowner_id:strowner_type:str#"user"or"team"balance:floathard_limit:floatsoft_limit:floatcurrency:str="USD"created_at:datetimeupdated_at:Optional[datetime]=NoneclassTransaction(BaseModel):"""Ledgertransactionmodel."""id:strwallet_id:strtype:TransactionTypeamount:floatbalance_after:floatdescription:Optional[str]=Nonemetadata:Dict[str,Any]=Field(default_factory=dict)created_at:datetimeidempotency_key:Optional[str]=NoneclassTransfer(BaseModel):"""Credittransferbetweenusers/teams."""id:strfrom_wallet_id:strto_wallet_id:stramount:floatmessage:Optional[str]=Nonestatus:TransferStatusrequires_approval:bool=Falseapproved_by:Optional[str]=Nonecreated_at:datetimecompleted_at:Optional[datetime]=NoneclassAPIKey(BaseModel):"""APIkeyforauthentication."""id:strname:strkey_prefix:str#First8charsforidentificationuser_id:strscopes:List[str]=Field(default_factory=list)is_active:bool=Truelast_used_at:Optional[datetime]=Noneexpires_at:Optional[datetime]=Nonecreated_at:datetimeclassProvider(BaseModel):"""LLMproviderconfiguration."""id:strname:strtype:str#openai,anthropic,gemini,etc.is_enabled:bool=Truepriority:int=0rate_limit:Optional[int]=Nonemodels:List[str]=Field(default_factory=list)health_status:str="healthy"last_health_check:Optional[datetime]=NoneclassPolicy(BaseModel):"""Governancepolicy."""id:strname:strdescription:Optional[str]=Nonerules:Dict[str,Any]=Field(default_factory=dict)action:PolicyAction=PolicyAction.DENYis_active:bool=Trueis_dry_run:bool=Falsepriority:int=0created_at:datetimeupdated_at:Optional[datetime]=NoneclassExperiment(BaseModel):"""A/Btestingexperiment."""id:strname:strdescription:Optional[str]=Nonestatus:ExperimentStatusvariants:List[Dict[str,Any]]=Field(default_factory=list)traffic_split:Dict[str,float]=Field(default_factory=dict)metrics:Dict[str,Any]=Field(default_factory=dict)start_time:Optional[datetime]=Noneend_time:Optional[datetime]=Nonecreated_at:datetime#============================================================#AnalyticsModels#============================================================classUsageReport(BaseModel):"""Usagestatisticsreport."""period_start:datetimeperiod_end:datetimetotal_requests:inttotal_tokens_input:inttotal_tokens_output:inttotal_cost:floatby_model:List[Dict[str,Any]]=Field(default_factory=list)by_day:List[Dict[str,Any]]=Field(default_factory=list)by_user:List[Dict[str,Any]]=Field(default_factory=list)classCostBreakdown(BaseModel):"""Costattributionbreakdown."""total_cost:floatby_provider:Dict[str,float]=Field(default_factory=dict)by_model:Dict[str,float]=Field(default_factory=dict)by_team:Dict[str,float]=Field(default_factory=dict)by_user:Dict[str,float]=Field(default_factory=dict)period_start:datetimeperiod_end:datetimeclassModelPricing(BaseModel):"""Modelpricinginformation."""model:strprovider:strinput_price_per_1k:floatoutput_price_per_1k:floatcontext_window:intis_available:bool=True#============================================================#Request/ResponseModels#============================================================classCompletionRequest(BaseModel):"""Chatcompletionrequest(OpenAI-compatible)."""model:strmessages:List[Dict[str,str]]temperature:float=0.7max_tokens:Optional[int]=Nonestream:bool=Falseuser:Optional[str]=NoneclassCompletionResponse(BaseModel):"""Chatcompletionresponse."""id:strmodel:strchoices:List[Dict[str,Any]]usage:Dict[str,int]created:intcost:Optional[float]=Nonecached:bool=FalseclassPaginatedResponse(BaseModel):"""Paginatedlistresponse."""items:List[Any]total:intpage:intpage_size:inthas_more:bool