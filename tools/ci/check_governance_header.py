#!/usr/bin/envpython3importsysimportosimportre#ThemarkerstringthatmustbepresentinAI-generatedfilesGOVERNANCE_MARKER="AIGENERATED-GOVERNANCEPROTOCOL"#RequiredfieldsintheheaderREQUIRED_FIELDS=["Model:","Tier:","Logic:","RootCause:","Context:","Suitability:"]#HeuristicstodetectAI-generatedcontentAI_INDICATORS=[r"copilot",r"claude",r"gpt-?4",r"gpt-?5",r"gemini",r"generatedbyai",r"ai.generated",]defcheck_file(filepath:str)->list[str]:"""Checkasinglefileforgovernanceheadercompliance.Returnsalistofwarningmessages(empty=compliant)."""warnings=[]try:withopen(filepath,"r",encoding="utf-8",errors="replace")asf:content=f.read()except(OSError,IOError):return[]#OnlycheckfilesthatappeartobeAI-generatedhas_governance=GOVERNANCE_MARKERincontentifhas_governance:#VerifyallrequiredfieldsarepresentforfieldinREQUIRED_FIELDS:iffieldnotincontent:warnings.append(f"{filepath}:Governanceheaderpresentbutmissing'{field}'field")#Ifnogovernanceheader,checkiffilelooksAI-generated(warningonly)ifnothas_governance:lower_content=content.lower()forpatterninAI_INDICATORS:ifre.search(pattern,lower_content):#Thisisasoftwarning—doesn'tfailthehook#OnlyflagitiftheAIindicatorisinacomment,notintestassertionspassreturnwarningsdefmain()->int:iflen(sys.argv)<2:print("Usage:check_governance_header.py<file1>[file2]...")return0files=sys.argv[1:]all_warnings:list[str]=[]forfilepathinfiles:ifnotos.path.isfile(filepath):continuewarnings=check_file(filepath)all_warnings.extend(warnings)ifall_warnings:print("⚠️GovernanceHeaderIssues:")forwinall_warnings:print(f"-{w}")print("\nEnsureallAI-generatedfilesincludethefull""[AIGENERATED-GOVERNANCEPROTOCOL]header.")print("See.github/copilot-instructions.mdfortherequiredformat.")return1return0if__name__=="__main__":sys.exit(main())