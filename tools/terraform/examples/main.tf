#AlfredTerraformProvider#terraform{required_providers{alfred={source="alfred-ai/alfred"version="~>1.0"}}}#Providerconfigurationexampleprovider"alfred"{api_key=var.alfred_api_key#OruseALFRED_API_KEYenvvarapi_url=var.alfred_api_url#Optional,defaultstohttps://api.alfred.ai}variable"alfred_api_key"{type=stringdescription="AlfredAPIkey"sensitive=true}variable"alfred_api_url"{type=stringdescription="AlfredAPIURL"default="https://api.alfred.ai"}#============================================================#Example:Teamwithbudgetallocation#============================================================resource"alfred_team""engineering"{name="Engineering"description="EngineeringdepartmentAIresources"}resource"alfred_wallet""engineering_wallet"{owner_id=alfred_team.engineering.idowner_type="team"hard_limit=1000.00soft_limit=800.00currency="USD"}#============================================================#Example:Governancepolicies#============================================================resource"alfred_policy""block_expensive_models"{name="BlockExpensiveModelsforInterns"description="Preventinternaccountsfromusingexpensivemodels"action="deny"priority=10is_active=truerules={conditions=[{field="user.role"operator="equals"value="intern"},{field="request.model"operator="in"value=["gpt-4o","claude-3-opus"]}]logic="AND"}}resource"alfred_policy""daily_limit"{name="DailySpendLimit"description="Alertwhendailyspendexceedsthreshold"action="warn"priority=5is_active=truerules={conditions=[{field="user.daily_spend"operator="greater_than"value=50.00}]}}#============================================================#Example:APIkeyforCI/CD#============================================================resource"alfred_api_key""ci_pipeline"{name="GitHubActionsCI"scopes=["read","completions"]expires_in_days=90}output"ci_api_key_prefix"{value=alfred_api_key.ci_pipeline.key_prefixdescription="PrefixoftheCIAPIkey(foridentification)"}#============================================================#Example:Routingconfiguration#============================================================resource"alfred_routing_rule""cost_optimization"{name="Routesimplequeriestocheapermodels"description="UseGPT-4o-miniforsimpleclassificationtasks"priority=100is_active=trueconditions=[{field="request.intent"operator="in"value=["classification","extraction"]},{field="request.estimated_complexity"operator="less_than"value=0.3}]action={type="route"model="gpt-4o-mini"}}#============================================================#Datasources#============================================================data"alfred_providers""all"{}output"available_providers"{value=data.alfred_providers.all.providers[*].name}data"alfred_usage""current_month"{start_date=formatdate("YYYY-MM-01",timestamp())end_date=formatdate("YYYY-MM-DD",timestamp())}output"monthly_cost"{value=data.alfred_usage.current_month.total_cost}