#!/bin/bash#ScripttoimplementsecurityheadersandContentSecurityPolicy(CSP)infrontendandAPI#DefinesecurityheadersSECURITY_HEADERS="\add_headerX-Content-Type-Options\"nosniff\";\add_headerX-Frame-Options\"DENY\";\add_headerX-XSS-Protection\"1;mode=block\";\add_headerStrict-Transport-Security\"max-age=31536000;includeSubDomains;preload\";\add_headerContent-Security-Policy\"default-src'self';script-src'self';object-src'none';\";\"#ApplyheaderstoNginxconfigurationNGINX_CONF="/etc/nginx/sites-available/default"ifgrep-q"add_header"$NGINX_CONF;thenecho"SecurityheadersalreadyconfiguredinNginx."elseecho"ConfiguringsecurityheadersinNginx..."sudosed-i"/server_name_;/a$SECURITY_HEADERS"$NGINX_CONFsudosystemctlreloadnginxecho"Securityheadersapplied."fi#ApplyheaderstoAPI(exampleforExpress.js)API_FILE="../dev/app/middleware/securityHeaders.js"if[!-f$API_FILE];thenecho"CreatingmiddlewareforsecurityheadersinExpress.js..."cat<<EOL>$API_FILEconsthelmet=require('helmet');module.exports=function(app){app.use(helmet());app.use(helmet.contentSecurityPolicy({directives:{defaultSrc:["'self'"],scriptSrc:["'self'"]}}));};EOLecho"Middlewarecreated."elseecho"Securityheadersmiddlewarealreadyexists."fiecho"SecurityheadersandCSPsetupcomplete."