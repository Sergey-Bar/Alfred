#PromtailConfigurationforAlfred#T257—CollectslogsfromDockercontainersandapplicationlogfiles.#ShipstoLokiwithlabelenrichmentforfilteringandsearch.server:http_listen_port:9080grpc_listen_port:0positions:filename:/tmp/positions.yamlclients:-url:http://loki:3100/loki/api/v1/pushtenant_id:alfredbatchwait:1sbatchsize:1048576#1MBtimeout:10sscrape_configs:#───DockerContainerLogs─────────────────────────────────-job_name:dockerdocker_sd_configs:-host:unix:///var/run/docker.sockrefresh_interval:5srelabel_configs:#Usecontainernameaslabel-source_labels:["__meta_docker_container_name"]regex:"/(.*)"target_label:container#UseDockerComposeservicename-source_labels:["__meta_docker_container_label_com_docker_compose_service"]target_label:service#UseDockerComposeproject-source_labels:["__meta_docker_container_label_com_docker_compose_project"]target_label:projectpipeline_stages:#TrytoparseJSONlogs(FastAPI/uvicornoutput)-json:expressions:level:leveltimestamp:timestampmessage:messagelogger:namerequest_id:request_iduser_id:user_idprovider:providerlatency_ms:latency_ms#Fallbacktoregexfornon-JSONlogs-regex:expression:'^(?P<timestamp>\S+)\s+(?P<level>\w+)\s+(?P<message>.*)$'#Setloglevellabel-labels:level:logger:#Timestampparsing-timestamp:source:timestampformat:RFC3339Nanofallback_formats:-"2006-01-02T15:04:05.000Z"-"2006-01-0215:04:05"#Drophealthchecklogstoreducenoise-match:selector:'{service="gateway"}'stages:-regex:expression:".*GET/health.*"-drop:source:""expression:".*GET/health.*"drop_counter_reason:health_check#───AlfredBackendLogs(file-based)─────────────────────-job_name:alfred-backendstatic_configs:-targets:-localhostlabels:job:alfred-backendservice:backend__path__:/var/log/alfred/*.logpipeline_stages:-json:expressions:level:leveltimestamp:timestampmessage:messagerequest_id:request_iduser_id:user_id-labels:level:-timestamp:source:timestampformat:RFC3339Nano#───AlfredGatewayLogs(Goservice)─────────────────────-job_name:alfred-gatewaystatic_configs:-targets:-localhostlabels:job:alfred-gatewayservice:gateway__path__:/var/log/alfred/gateway*.logpipeline_stages:-json:expressions:level:levelmsg:msgts:tsprovider:providerlatency:latencymodel:modelstatus:status-labels:level:provider:-timestamp:source:tsformat:RFC3339Nano#───SystemLogs──────────────────────────────────────────-job_name:systemstatic_configs:-targets:-localhostlabels:job:system__path__:/var/log/syslogpipeline_stages:-regex:expression:'^(?P<timestamp>\w+\s+\d+\s+\S+)\s+(?P<host>\S+)\s+(?P<process>\S+):\s+(?P<message>.*)$'-labels:host:process: