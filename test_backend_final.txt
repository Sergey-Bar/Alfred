============================= test session starts =============================
platform win32 -- Python 3.14.3, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\Sergey\AppData\Local\Python\pythoncore-3.14-64\python.exe
cachedir: .pytest_cache
rootdir: C:\Projects\Alfred
configfile: pyproject.toml
plugins: anyio-4.12.1, base-url-2.1.0, playwright-0.7.2
collecting ... collected 77 items

dev/QA/Backend/Integration/test_integration.py::TestChatCompletionFlow::test_complete_request_flow_with_quota PASSED [  1%]
dev/QA/Backend/Integration/test_integration.py::TestChatCompletionFlow::test_quota_exceeded_returns_403 PASSED [  2%]
dev/QA/Backend/Integration/test_integration.py::TestApprovalWorkflow::test_create_approval_request PASSED [  3%]
dev/QA/Backend/Integration/test_integration.py::TestPrivacyMode::test_strict_privacy_header PASSED [  5%]
dev/QA/Backend/Integration/test_integration.py::TestTeamManagement::test_add_user_to_team PASSED [  6%]
dev/QA/Backend/Integration/test_integration.py::TestErrorResponses::test_validation_error_format PASSED [  7%]
dev/QA/Backend/Integration/test_integration.py::TestErrorResponses::test_not_found_error_format PASSED [  9%]
dev/QA/Backend/Integration/test_integration.py::TestErrorResponses::test_rate_limit_response_format PASSED [ 10%]
dev/QA/Backend/Performance/test_query_benchmarks.py::TestQueryBenchmarks::test_leaderboard_query_performance PASSED [ 11%]
dev/QA/Backend/Performance/test_query_benchmarks.py::TestQueryBenchmarks::test_transfer_history_query_performance PASSED [ 12%]
dev/QA/Backend/Performance/test_query_benchmarks.py::TestQueryBenchmarks::test_user_usage_stats_query_performance PASSED [ 14%]
dev/QA/Backend/Performance/test_query_benchmarks.py::TestQueryBenchmarks::test_dashboard_transfers_query_performance PASSED [ 15%]
dev/QA/Backend/Performance/test_query_benchmarks.py::TestQueryBenchmarks::test_approval_stats_query_performance PASSED [ 16%]
dev/QA/Backend/Performance/test_query_benchmarks.py::TestQueryBenchmarks::test_index_effectiveness PASSED [ 18%]
dev/QA/Backend/Security/test_auth_security.py::TestAuthSecurity::test_missing_auth_returns_401 PASSED [ 19%]
dev/QA/Backend/Security/test_auth_security.py::TestAuthSecurity::test_invalid_api_key_returns_401 PASSED [ 20%]
dev/QA/Backend/Security/test_auth_security.py::TestAuthSecurity::test_rate_limiting_blocks_excessive_requests PASSED [ 22%]
dev/QA/Backend/Security/test_auth_security.py::TestAuthSecurity::test_sql_injection_in_email_fails PASSED [ 23%]
dev/QA/Backend/Security/test_auth_security.py::TestAuthSecurity::test_xss_in_name_is_sanitized PASSED [ 24%]
dev/QA/Backend/Security/test_auth_security.py::TestAuthSecurity::test_authorization_bearer_format PASSED [ 25%]
dev/QA/Backend/Unit/test_api.py::TestHealthEndpoint::test_health_check PASSED [ 27%]
dev/QA/Backend/Unit/test_api.py::TestRootEndpoint::test_root PASSED      [ 28%]
dev/QA/Backend/Unit/test_api.py::TestRootEndpoint::test_root_spa_mode SKIPPED [ 29%]
dev/QA/Backend/Unit/test_api.py::TestUserEndpoints::test_create_user PASSED [ 31%]
dev/QA/Backend/Unit/test_api.py::TestUserEndpoints::test_create_user_duplicate_email PASSED [ 32%]
dev/QA/Backend/Unit/test_api.py::TestUserEndpoints::test_get_current_user_no_auth PASSED [ 33%]
dev/QA/Backend/Unit/test_api.py::TestUserEndpoints::test_get_current_user_invalid_key PASSED [ 35%]
dev/QA/Backend/Unit/test_api.py::TestChatCompletions::test_chat_completions_no_auth PASSED [ 36%]
dev/QA/Backend/Unit/test_api.py::TestTeamEndpoints::test_create_team PASSED [ 37%]
dev/QA/Backend/Unit/test_api.py::TestLeaderboard::test_get_leaderboard PASSED [ 38%]
dev/QA/Backend/Unit/test_api.py::TestLeaderboard::test_get_leaderboard_invalid_period PASSED [ 40%]
dev/QA/Backend/Unit/test_api_contracts.py::test_get_current_user_contract PASSED [ 41%]
dev/QA/Backend/Unit/test_api_contracts.py::test_admin_users_requires_auth PASSED [ 42%]
dev/QA/Backend/Unit/test_api_contracts.py::test_create_approval_contract PASSED [ 44%]
dev/QA/Backend/Unit/test_config.py::TestSettings::test_default_settings PASSED [ 45%]
dev/QA/Backend/Unit/test_config.py::TestSettings::test_settings_from_env PASSED [ 46%]
dev/QA/Backend/Unit/test_config.py::TestSettings::test_log_level_validation PASSED [ 48%]
dev/QA/Backend/Unit/test_config.py::TestSettings::test_environment_validation PASSED [ 49%]
dev/QA/Backend/Unit/test_config.py::TestSettings::test_is_production_property PASSED [ 50%]
dev/QA/Backend/Unit/test_config.py::TestSettings::test_is_sqlite_property PASSED [ 51%]
dev/QA/Backend/Unit/test_config.py::TestSettings::test_rate_limit_string PASSED [ 53%]
dev/QA/Backend/Unit/test_config.py::TestLogging::test_json_formatter PASSED [ 54%]
dev/QA/Backend/Unit/test_config.py::TestLogging::test_pii_masking PASSED [ 55%]
dev/QA/Backend/Unit/test_config.py::TestLogging::test_get_logger PASSED  [ 57%]
dev/QA/Backend/Unit/test_config.py::TestLogging::test_request_context_vars PASSED [ 58%]
dev/QA/Backend/Unit/test_config.py::TestExceptions::test_quota_exceeded_exception PASSED [ 59%]
dev/QA/Backend/Unit/test_config.py::TestExceptions::test_authentication_exception PASSED [ 61%]
dev/QA/Backend/Unit/test_config.py::TestExceptions::test_resource_not_found_exception PASSED [ 62%]
dev/QA/Backend/Unit/test_config.py::TestExceptions::test_llm_provider_exception PASSED [ 63%]
dev/QA/Backend/Unit/test_middleware.py::TestRateLimitMiddleware::test_rate_limit_allows_requests_within_limit PASSED [ 64%]
dev/QA/Backend/Unit/test_middleware.py::TestRateLimitMiddleware::test_rate_limit_blocks_excess_requests PASSED [ 66%]
dev/QA/Backend/Unit/test_middleware.py::TestRateLimitMiddleware::test_rate_limit_skips_health_endpoint PASSED [ 67%]
dev/QA/Backend/Unit/test_middleware.py::TestRateLimitMiddleware::test_rate_limit_disabled PASSED [ 68%]
dev/QA/Backend/Unit/test_middleware.py::TestRequestContextMiddleware::test_adds_request_id_header PASSED [ 70%]
dev/QA/Backend/Unit/test_middleware.py::TestRequestContextMiddleware::test_uses_provided_request_id PASSED [ 71%]
dev/QA/Backend/Unit/test_middleware.py::TestEfficiencyScorer::test_calculate_efficiency_score PASSED [ 72%]
dev/QA/Backend/Unit/test_middleware.py::TestEfficiencyScorer::test_efficiency_score_rounding PASSED [ 74%]
dev/QA/Backend/Unit/test_quota.py::TestCreditCalculator::test_calculate_cost_gpt4 PASSED [ 75%]
dev/QA/Backend/Unit/test_quota.py::TestCreditCalculator::test_calculate_cost_gpt35 PASSED [ 76%]
dev/QA/Backend/Unit/test_quota.py::TestCreditCalculator::test_estimate_cost PASSED [ 77%]
dev/QA/Backend/Unit/test_quota.py::TestQuotaManager::test_check_quota_personal_available PASSED [ 79%]
dev/QA/Backend/Unit/test_quota.py::TestQuotaManager::test_check_quota_personal_exceeded PASSED [ 80%]
dev/QA/Backend/Unit/test_quota.py::TestQuotaManager::test_check_quota_critical_bypass PASSED [ 81%]
dev/QA/Backend/Unit/test_quota.py::TestQuotaManager::test_check_quota_vacation_sharing PASSED [ 83%]
dev/QA/Backend/Unit/test_quota.py::TestQuotaManager::test_deduct_quota_personal PASSED [ 84%]
dev/QA/Backend/Unit/test_quota.py::TestEfficiencyScorer::test_calculate_efficiency_score PASSED [ 85%]
dev/QA/Backend/Unit/test_quota.py::TestEfficiencyScorer::test_calculate_efficiency_score_zero_prompt PASSED [ 87%]
dev/QA/Backend/Unit/test_quota.py::TestEfficiencyScorer::test_calculate_efficiency_high_ratio PASSED [ 88%]
dev/QA/Backend/Unit/test_vacation_sharing.py::TestVacationSharing::test_vacation_share_available_when_member_on_vacation PASSED [ 89%]
dev/QA/Backend/Unit/test_vacation_sharing.py::TestVacationSharing::test_no_vacation_share_when_no_members_on_vacation PASSED [ 90%]
dev/QA/Backend/Unit/test_vacation_sharing.py::TestVacationSharing::test_vacation_share_respects_percentage_limit PASSED [ 92%]
dev/QA/Backend/Unit/test_vacation_sharing.py::TestQuotaDeduction::test_deduct_personal_quota PASSED [ 93%]
dev/QA/Backend/Unit/test_vacation_sharing.py::TestQuotaDeduction::test_deduct_team_pool PASSED [ 94%]
dev/QA/Backend/Unit/test_vacation_sharing.py::TestQuotaDeduction::test_add_quota PASSED [ 96%]
dev/QA/Backend/Unit/test_vacation_sharing.py::TestPriorityBypass::test_critical_priority_uses_team_pool PASSED [ 97%]
dev/QA/Backend/Unit/test_vacation_sharing.py::TestPriorityBypass::test_normal_priority_cannot_bypass PASSED [ 98%]
dev/QA/Backend/Unit/test_vacation_sharing.py::TestPriorityBypass::test_high_priority_treated_as_normal PASSED [100%]

============================== warnings summary ===============================
..\..\Users\Sergey\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\_pytest\config\__init__.py:1428
  C:\Users\Sergey\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\_pytest\config\__init__.py:1428: PytestConfigWarning: Unknown config option: asyncio_mode
  
    self._warn_or_fail_if_strict(f"Unknown config option: {key}\n")

..\..\Users\Sergey\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\litellm\litellm_core_utils\logging_utils.py:273: 15 warnings
  C:\Users\Sergey\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\litellm\litellm_core_utils\logging_utils.py:273: DeprecationWarning: 'asyncio.iscoroutinefunction' is deprecated and slated for removal in Python 3.16; use inspect.iscoroutinefunction() instead
    if asyncio.iscoroutinefunction(func):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================= 76 passed, 1 skipped, 16 warnings in 7.71s ==================
