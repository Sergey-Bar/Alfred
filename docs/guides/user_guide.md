#AlfredUserGuide##TableofContents1.[Introduction](#introduction)2.[Installation](#installation)3.[QuickStart](#quick-start)4.[UserManagement](#user-management)5.[TeamManagement](#team-management)6.[APIUsage](#api-usage)7.[CreditReallocation](#credit-reallocation)8.[DashboardFeatures](#dashboard-features)9.[Configuration](#configuration)10.[Troubleshooting](#troubleshooting)---##IntroductionAlfredisanenterpriseAICreditGovernancePlatformthathelpsB2BorganizationsmanagesharedAPIcreditpools.WhencompaniespurchasebulkAPIquotasfromOpenAI,Anthropic,Azure,orGoogle,Alfredprovidesthemissinggovernancelayer:userquotas,teambudgets,vacationreallocation,approvalworkflows,andefficiencytracking.>**Note**:Alfredrequiresenterprise/API-levelaccountswithsharedcreditpools.Consumersubscriptions($20/month)cannotbemanaged.###KeyFeatures-**CreditPoolGovernance**:Allocateenterprisecreditstousersandteams-**Real-timeAnalytics**:Trackusage,costs,andefficiencymetrics-**BudgetReallocation**:Adminscanredistributecreditsbetweenusers-**VacationMode**:Automaticallyreleaseidlequotastoteampool-**PriorityOverrides**:Emergencybypassforcriticalprojects-**PrivacyMode**:Preventloggingofsensitiverequests-**Multi-ProviderSupport**:Workswith100+LLMprovidersviaLiteLLM###SupportedProviders|Category|Providers||----------|-----------||**PublicAPIs**|OpenAI(GPT-4o,o1),Anthropic(Claude3.5),Google(Gemini1.5Pro)||**EnterpriseCloud**|AzureOpenAI,AWSBedrock,GoogleVertexAI||**Self-Hosted**|vLLM(Llama3.1,Mixtral),TGI,Ollama|---##Installation###Prerequisites-Python3.10+-Node.js18+(forfrontend)-PostgreSQL(production)orSQLite(development)###Step1:ClonetheRepository```bashgitclonehttps://github.com/yourusername/alfred.gitcdalfred```###Step2:SetUpPythonEnvironment```bash#Createvirtualenvironmentpython-mvenv.venv#Activatevirtualenvironment#Windows:.\.venv\Scripts\Activate.ps1#Linux/Mac:source.venv/bin/activate#Installdependenciespipinstall-rsrc/backend/requirements/requirements.txt```###Step3:ConfigureEnvironment```bash#Copyexampleconfigurationcpsrc/backend/config/.env.example.env#Edit.envwithyoursettings#Atminimum,addyourLLMproviderAPIkeys:#OPENAI_API_KEY=sk-...#ANTHROPIC_API_KEY=sk-ant-...```###Step4:InitializeDatabase```bash#Rundatabasemigrationsalembicupgradehead```###Step5:BuildFrontend(Optional)```bashcdfrontendnpminstallnpmrunbuildcd..```###Step6:StarttheServer```bash#Developmentmodewithauto-reloaduvicornapp.main:app--reload--host0.0.0.0--port8000#Productionmodeuvicornapp.main:app--host0.0.0.0--port8000--workers4```###DockerInstallation```bash#BuildandrunwithDockerComposecddockerdocker-composeup-d```---##QuickStart###ExampleWorkflow1.**Login**:UseyourAPIkeytoauthenticate.2.**AllocateCredits**:Adminscanallocatecreditstoteams.3.**MonitorUsage**:Usethedashboardtotrackusageinreal-time.###VisualExample![DashboardScreenshot](../images/dashboard.png)###1.CreateYourFirstAdminUser```bash#Usingtheseedscriptpythonscripts/seed_data.py#OrviaAPI(afterserverisrunning)curl-XPOSThttp://localhost:8000/v1/admin/users\-H"Content-Type:application/json"\-d'{"email":"admin@company.com","name":"AdminUser","personal_quota":10000}'```SavethereturnedAPIkey-itcannotberetrievedlater!###2.AccesstheDashboardOpenyourbrowserandnavigateto:`http://localhost:8000/static/`EnteryourAPIkeytologin.###3.CreateAdditionalUsersFromthedashboard:1.Click"ManageUsers"inthesidebar2.Click"AddUser"3.Fillinuserdetails4.SharethegeneratedAPIkeywiththeuser###4.StartUsingtheAPIConfigureyourapplicationtouseAlfredastheAPIendpoint:```pythonfromopenaiimportOpenAIclient=OpenAI(api_key="tp-your-api-key-here",base_url="http://localhost:8000/v1")response=client.chat.completions.create(model="gpt-4",messages=[{"role":"user","content":"Hello!"}])```---##UserManagement###CreatingUsersUserscanbecreatedthroughthedashboardorAPI:**Dashboard:**1.Navigateto"ManageUsers"2.Click"AddUser"3.Entername,email,andquota4.TheAPIkeyisdisplayedonce-saveitsecurely**API:**```bashcurl-XPOSThttp://localhost:8000/v1/admin/users\-H"X-API-Key:your-admin-key"\-H"Content-Type:application/json"\-d'{"email":"user@company.com","name":"NewUser","personal_quota":5000}'```###UserStatus-**Active**:Normaloperation-**OnVacation**:Sharesquotawithteammembers-**Suspended**:CannotmakeAPIrequests###ModifyingUsers```bashcurl-XPUThttp://localhost:8000/v1/admin/users/{user_id}\-H"X-API-Key:your-admin-key"\-H"Content-Type:application/json"\-d'{"name":"UpdatedName","personal_quota":10000,"status":"active"}'```---##TeamManagement###CreatingTeamsTeamsallowsharedquotapoolsamongmembers:**Dashboard:**1.Navigateto"ManageTeams"2.Click"AddTeam"3.Setteamnameandpoolquota**API:**```bashcurl-XPOSThttp://localhost:8000/v1/admin/teams\-H"X-API-Key:your-admin-key"\-H"Content-Type:application/json"\-d'{"name":"Engineering","description":"Softwaredevelopmentteam","common_pool":50000}'```###AddingTeamMembers```bashcurl-XPOSThttp://localhost:8000/v1/admin/teams/{team_id}/members/{user_id}?is_admin=false\-H"X-API-Key:your-admin-key"```###TeamPoolUsageWhenauser'spersonalquotaisexhausted,theycandrawfromtheirteam'ssharedpool.Thepoolissharedequallyamongallactiveteammembers.---##APIUsage###MakingRequestsAlfredisfullycompatiblewiththeOpenAIAPIformat:```pythonfromopenaiimportOpenAIclient=OpenAI(api_key="tp-your-api-key",base_url="http://your-alfred-server/v1")#Chatcompletionresponse=client.chat.completions.create(model="gpt-4",messages=[{"role":"system","content":"Youareahelpfulassistant."},{"role":"user","content":"WhatisthecapitalofFrance?"}])print(response.choices[0].message.content)```###SupportedModelsAlfredsupportsanymodelavailablethroughLiteLLM,including:-OpenAI:gpt-4,gpt-4-turbo,gpt-3.5-turbo-Anthropic:claude-3-opus,claude-3-sonnet,claude-3-haiku-Google:gemini-pro,gemini-pro-vision-And100+moreproviders###SpecialHeaders|Header|Description|Example||--------|-------------|---------||`X-Privacy-Mode`|Preventsmessagelogging|`X-Privacy-Mode:strict`||`X-Priority`|Prioritylevelforrequest|`X-Priority:critical`||`X-Project-ID`|Associatewithproject|`X-Project-ID:project-123`|###CheckingYourQuota```bashcurlhttp://localhost:8000/v1/users/me/quota\-H"Authorization:Bearertp-your-api-key"```Response:```json{"personal_quota":10000,"used_tokens":3500,"available_quota":6500,"team_pool_available":15000}```---##CreditReallocation###ReallocatingCreditsAdminsandauthorizeduserscanreallocatecreditsfromtheirallocatedquotatoothers:```bashcurl-XPOSThttp://localhost:8000/v1/users/me/transfer\-H"Authorization:Bearertp-your-api-key"\-H"Content-Type:application/json"\-d'{"recipient_email":"colleague@company.com","amount":500,"reason":"Projectdeadlinesupport"}'```###ReallocationRules-Canonlyreallocatefromyourallocatedquota-Cannotexceedavailablebalance-Allreallocationsareloggedforauditcompliance-Recipientsreceivenotifications---##DashboardFeatures###OverviewThedashboardhomeshows:-Totalusersandteams-Tokenusagestatistics-Costtrendsovertime-Modelusagebreakdown-Efficiencyleaderboard###UserManagement-Viewalluserswithquotaandusage-Create,edit,anddeleteusers-Setvacationstatus-Assignadminprivileges###TeamManagement-Viewteamswithpoolusage-Createandmanageteams-Add/removeteammembers-Monitorteamefficiency###CreditReallocation-Viewreallocationhistory-Filterbydate,user,oramount-Exportreallocationreportsforauditing###UserGuideAccessthebuilt-inuserguidefromthesidebarforquickreferencewhileusingthedashboard.###DarkModeToggledarkmodefromthesidebarforcomfortableviewinginlow-lightconditions.---##Configuration###EnvironmentVariables|Variable|Description|Default||----------|-------------|---------||`DATABASE_URL`|Databaseconnectionstring|`sqlite:///./alfred.db`||`ENVIRONMENT`|development/production|`production`||`DEBUG`|Enabledebugmode|`false`||`OPENAI_API_KEY`|OpenAIAPIkey|-||`ANTHROPIC_API_KEY`|AnthropicAPIkey|-||`NOTIFICATIONS_ENABLED`|Enablenotifications|`true`||`SLACK_WEBHOOK_URL`|Slackwebhookforalerts|-|###QuotaSettingsConfigureorganization-widesettings:```python#DefaultquotasDEFAULT_PERSONAL_QUOTA=1000#tokensDEFAULT_TEAM_POOL=10000#tokens#VacationsharingVACATION_SHARE_PERCENTAGE=10#%ofteampool#PriorityoverridelimitsCRITICAL_OVERDRAFT_LIMIT=5000#maxoverdraftforcriticalpriority```---##Troubleshooting###CommonIssues**Cannotlogintodashboard:**-EnsureyourAPIkeyiscorrect(startswith`tp-`)-Checkthattheserverisrunning-VerifytheAPIkeyhasn'tbeeninvalidated**Quotaexceedederrors:**-Checkyourquotastatus:`GET/v1/users/me/quota`-Requestadditionalquotafromyourmanager-Considerpriorityoverrideforcriticalrequests**Requeststimingout:**-CheckyourLLMproviderAPIkeyconfiguration-VerifynetworkconnectivitytoLLMproviders-Checkserverlogsforerrors**Databaseconnectionerrors:**-VerifyDATABASE_URLiscorrect-Ensuredatabaseserverisrunning-Checknetwork/firewallsettings###GettingHelp-Checkthe[GitHubrepository](https://github.com/yourusername/alfred)forissues-Reviewserverlogs:`dockerlogsalfred-server`-Contactyoursystemadministrator---##LicenseAlfredisopensourcesoftwarelicensedundertheMITLicense.