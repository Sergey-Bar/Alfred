============================= test session starts =============================
platform win32 -- Python 3.14.3, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\Sergey\AppData\Local\Python\pythoncore-3.14-64\python.exe
cachedir: .pytest_cache
rootdir: C:\Projects\Alfred
configfile: pyproject.toml
plugins: anyio-4.12.1, base-url-2.1.0, playwright-0.7.2
collecting ... collected 57 items

dev/QA/Backend/Unit/test_api.py::TestHealthEndpoint::test_health_check PASSED [  1%]
dev/QA/Backend/Unit/test_api.py::TestRootEndpoint::test_root PASSED      [  3%]
dev/QA/Backend/Unit/test_api.py::TestRootEndpoint::test_root_spa_mode SKIPPED [  5%]
dev/QA/Backend/Unit/test_api.py::TestUserEndpoints::test_create_user PASSED [  7%]
dev/QA/Backend/Unit/test_api.py::TestUserEndpoints::test_create_user_duplicate_email PASSED [  8%]
dev/QA/Backend/Unit/test_api.py::TestUserEndpoints::test_get_current_user_no_auth PASSED [ 10%]
dev/QA/Backend/Unit/test_api.py::TestUserEndpoints::test_get_current_user_invalid_key PASSED [ 12%]
dev/QA/Backend/Unit/test_api.py::TestChatCompletions::test_chat_completions_no_auth PASSED [ 14%]
dev/QA/Backend/Unit/test_api.py::TestTeamEndpoints::test_create_team PASSED [ 15%]
dev/QA/Backend/Unit/test_api.py::TestLeaderboard::test_get_leaderboard PASSED [ 17%]
dev/QA/Backend/Unit/test_api.py::TestLeaderboard::test_get_leaderboard_invalid_period PASSED [ 19%]
dev/QA/Backend/Unit/test_api_contracts.py::test_get_current_user_contract PASSED [ 21%]
dev/QA/Backend/Unit/test_api_contracts.py::test_admin_users_requires_auth PASSED [ 22%]
dev/QA/Backend/Unit/test_api_contracts.py::test_create_approval_contract PASSED [ 24%]
dev/QA/Backend/Unit/test_config.py::TestSettings::test_default_settings PASSED [ 26%]
dev/QA/Backend/Unit/test_config.py::TestSettings::test_settings_from_env PASSED [ 28%]
dev/QA/Backend/Unit/test_config.py::TestSettings::test_log_level_validation PASSED [ 29%]
dev/QA/Backend/Unit/test_config.py::TestSettings::test_environment_validation PASSED [ 31%]
dev/QA/Backend/Unit/test_config.py::TestSettings::test_is_production_property PASSED [ 33%]
dev/QA/Backend/Unit/test_config.py::TestSettings::test_is_sqlite_property PASSED [ 35%]
dev/QA/Backend/Unit/test_config.py::TestSettings::test_rate_limit_string PASSED [ 36%]
dev/QA/Backend/Unit/test_config.py::TestLogging::test_json_formatter PASSED [ 38%]
dev/QA/Backend/Unit/test_config.py::TestLogging::test_pii_masking PASSED [ 40%]
dev/QA/Backend/Unit/test_config.py::TestLogging::test_get_logger PASSED  [ 42%]
dev/QA/Backend/Unit/test_config.py::TestLogging::test_request_context_vars PASSED [ 43%]
dev/QA/Backend/Unit/test_config.py::TestExceptions::test_quota_exceeded_exception PASSED [ 45%]
dev/QA/Backend/Unit/test_config.py::TestExceptions::test_authentication_exception PASSED [ 47%]
dev/QA/Backend/Unit/test_config.py::TestExceptions::test_resource_not_found_exception PASSED [ 49%]
dev/QA/Backend/Unit/test_config.py::TestExceptions::test_llm_provider_exception PASSED [ 50%]
dev/QA/Backend/Unit/test_middleware.py::TestRateLimitMiddleware::test_rate_limit_allows_requests_within_limit PASSED [ 52%]
dev/QA/Backend/Unit/test_middleware.py::TestRateLimitMiddleware::test_rate_limit_blocks_excess_requests PASSED [ 54%]
dev/QA/Backend/Unit/test_middleware.py::TestRateLimitMiddleware::test_rate_limit_skips_health_endpoint PASSED [ 56%]
dev/QA/Backend/Unit/test_middleware.py::TestRateLimitMiddleware::test_rate_limit_disabled PASSED [ 57%]
dev/QA/Backend/Unit/test_middleware.py::TestRequestContextMiddleware::test_adds_request_id_header PASSED [ 59%]
dev/QA/Backend/Unit/test_middleware.py::TestRequestContextMiddleware::test_uses_provided_request_id PASSED [ 61%]
dev/QA/Backend/Unit/test_middleware.py::TestEfficiencyScorer::test_calculate_efficiency_score PASSED [ 63%]
dev/QA/Backend/Unit/test_middleware.py::TestEfficiencyScorer::test_efficiency_score_rounding PASSED [ 64%]
dev/QA/Backend/Unit/test_quota.py::TestCreditCalculator::test_calculate_cost_gpt4 PASSED [ 66%]
dev/QA/Backend/Unit/test_quota.py::TestCreditCalculator::test_calculate_cost_gpt35 PASSED [ 68%]
dev/QA/Backend/Unit/test_quota.py::TestCreditCalculator::test_estimate_cost PASSED [ 70%]
dev/QA/Backend/Unit/test_quota.py::TestQuotaManager::test_check_quota_personal_available PASSED [ 71%]
dev/QA/Backend/Unit/test_quota.py::TestQuotaManager::test_check_quota_personal_exceeded PASSED [ 73%]
dev/QA/Backend/Unit/test_quota.py::TestQuotaManager::test_check_quota_critical_bypass PASSED [ 75%]
dev/QA/Backend/Unit/test_quota.py::TestQuotaManager::test_check_quota_vacation_sharing PASSED [ 77%]
dev/QA/Backend/Unit/test_quota.py::TestQuotaManager::test_deduct_quota_personal PASSED [ 78%]
dev/QA/Backend/Unit/test_quota.py::TestEfficiencyScorer::test_calculate_efficiency_score PASSED [ 80%]
dev/QA/Backend/Unit/test_quota.py::TestEfficiencyScorer::test_calculate_efficiency_score_zero_prompt PASSED [ 82%]
dev/QA/Backend/Unit/test_quota.py::TestEfficiencyScorer::test_calculate_efficiency_high_ratio PASSED [ 84%]
dev/QA/Backend/Unit/test_vacation_sharing.py::TestVacationSharing::test_vacation_share_available_when_member_on_vacation PASSED [ 85%]
dev/QA/Backend/Unit/test_vacation_sharing.py::TestVacationSharing::test_no_vacation_share_when_no_members_on_vacation PASSED [ 87%]
dev/QA/Backend/Unit/test_vacation_sharing.py::TestVacationSharing::test_vacation_share_respects_percentage_limit PASSED [ 89%]
dev/QA/Backend/Unit/test_vacation_sharing.py::TestQuotaDeduction::test_deduct_personal_quota PASSED [ 91%]
dev/QA/Backend/Unit/test_vacation_sharing.py::TestQuotaDeduction::test_deduct_team_pool PASSED [ 92%]
dev/QA/Backend/Unit/test_vacation_sharing.py::TestQuotaDeduction::test_add_quota PASSED [ 94%]
dev/QA/Backend/Unit/test_vacation_sharing.py::TestPriorityBypass::test_critical_priority_uses_team_pool PASSED [ 96%]
dev/QA/Backend/Unit/test_vacation_sharing.py::TestPriorityBypass::test_normal_priority_cannot_bypass PASSED [ 98%]
dev/QA/Backend/Unit/test_vacation_sharing.py::TestPriorityBypass::test_high_priority_treated_as_normal PASSED [100%]

============================== warnings summary ===============================
..\..\Users\Sergey\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\_pytest\config\__init__.py:1428
  C:\Users\Sergey\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\_pytest\config\__init__.py:1428: PytestConfigWarning: Unknown config option: asyncio_mode
  
    self._warn_or_fail_if_strict(f"Unknown config option: {key}\n")

..\..\Users\Sergey\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\litellm\litellm_core_utils\logging_utils.py:273: 15 warnings
  C:\Users\Sergey\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\litellm\litellm_core_utils\logging_utils.py:273: DeprecationWarning: 'asyncio.iscoroutinefunction' is deprecated and slated for removal in Python 3.16; use inspect.iscoroutinefunction() instead
    if asyncio.iscoroutinefunction(func):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================= 56 passed, 1 skipped, 16 warnings in 3.29s ==================
