import{a as N,j as e}from"./index-DmO1ypIk.js";import{r as t}from"./vendor-CoKE50sv.js";import{v as y,h as b,ai as w,o as A,t as P,aj as j,e as E,X as D,V as R,ak as C,al as T,a5 as S,ae as V,G as k}from"./icons-UwgmH0ZI.js";const p={DRAFT:{color:"badge-gray",icon:j},PENDING_REVIEW:{color:"badge-yellow",icon:P},APPROVED:{color:"badge-green",icon:A},REJECTED:{color:"badge-red",icon:w}},f=[{id:"p-1",name:"Code Review Assistant",description:"Analyzes code for bugs, security issues, and best practices",currentVersion:3,status:"APPROVED",model:"claude-sonnet-4-20250514",tags:["engineering","code-review"],createdBy:"alice@acme.com",updatedAt:"2026-02-15T10:30:00Z",versions:[{version:3,content:"You are a senior code reviewer...",status:"APPROVED",createdAt:"2026-02-15T10:30:00Z"},{version:2,content:"You are a code reviewer...",status:"APPROVED",createdAt:"2026-02-10T08:00:00Z"},{version:1,content:"Review the following code...",status:"APPROVED",createdAt:"2026-02-01T09:00:00Z"}]},{id:"p-2",name:"Customer Support Agent",description:"Handles customer inquiries with empathy and accuracy",currentVersion:5,status:"APPROVED",model:"gpt-4o",tags:["support","customer-facing"],createdBy:"bob@acme.com",updatedAt:"2026-02-14T16:20:00Z",versions:[{version:5,content:"You are a helpful customer support agent for Acme Corp...",status:"APPROVED",createdAt:"2026-02-14T16:20:00Z"},{version:4,content:"You are a customer support agent...",status:"APPROVED",createdAt:"2026-02-08T11:00:00Z"}]},{id:"p-3",name:"Legal Contract Summarizer",description:"Extracts key clauses and risks from legal documents",currentVersion:2,status:"PENDING_REVIEW",model:"claude-sonnet-4-20250514",tags:["legal","compliance"],createdBy:"carol@acme.com",updatedAt:"2026-02-16T09:00:00Z",versions:[{version:2,content:"You are a legal analyst AI. Summarize the contract...",status:"PENDING_REVIEW",createdAt:"2026-02-16T09:00:00Z"},{version:1,content:"Summarize the following legal contract...",status:"APPROVED",createdAt:"2026-02-05T14:00:00Z"}]},{id:"p-4",name:"Data Analysis Report Generator",description:"Generates business intelligence reports from raw data",currentVersion:1,status:"DRAFT",model:"gpt-4o-mini",tags:["analytics","reporting"],createdBy:"dave@acme.com",updatedAt:"2026-02-17T11:00:00Z",versions:[{version:1,content:"Analyze the following dataset and generate a report...",status:"DRAFT",createdAt:"2026-02-17T11:00:00Z"}]}];function O({prompt:a,onClose:c,onUpdate:g}){const[r,i]=t.useState("content"),[d,l]=t.useState(!1),[h,m]=t.useState("");if(!a)return null;const o=a.versions?.[0],v=()=>{m(o?.content||""),l(!0)},x=()=>{l(!1)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:c,children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-3xl w-full mx-4 max-h-[85vh] overflow-hidden flex flex-col",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:a.name}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-primary-500)"},children:a.description})]}),e.jsx("button",{onClick:c,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(D,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex border-b px-4",children:[{id:"content",label:"Content",icon:R},{id:"versions",label:"Versions",icon:C},{id:"settings",label:"Settings",icon:T}].map(s=>e.jsxs("button",{onClick:()=>i(s.id),className:`flex items-center gap-1 px-4 py-3 text-sm border-b-2 transition-all ${r===s.id?"border-blue-600 text-blue-600 font-medium":"border-transparent hover:text-gray-700"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"})," ",s.label]},s.id))}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[r==="content"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`badge ${p[a.status]?.color}`,children:a.status}),e.jsxs("span",{className:"text-sm",style:{color:"var(--color-primary-400)"},children:["v",a.currentVersion]})]}),e.jsxs("div",{className:"flex gap-2",children:[!d&&e.jsxs("button",{onClick:v,className:"btn btn-sm flex items-center gap-1",children:[e.jsx(j,{className:"w-3 h-3"})," Edit"]}),e.jsxs("button",{className:"btn btn-sm flex items-center gap-1",children:[e.jsx(S,{className:"w-3 h-3"})," Duplicate"]})]})]}),d?e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{className:"input w-full font-mono text-sm",rows:12,value:h,onChange:s=>m(s.target.value)}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>l(!1),className:"btn btn-sm",children:"Cancel"}),e.jsxs("button",{onClick:x,className:"btn btn-primary btn-sm flex items-center gap-1",children:[e.jsx(V,{className:"w-3 h-3"})," Save as v",a.currentVersion+1]})]})]}):e.jsx("div",{className:"p-4 rounded-lg font-mono text-sm whitespace-pre-wrap",style:{background:"var(--color-primary-100)"},children:o?.content||"No content"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs",style:{color:"var(--color-primary-400)"},children:"Model"}),e.jsx("code",{className:"text-xs",children:a.model})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs",style:{color:"var(--color-primary-400)"},children:"Created By"}),e.jsx("p",{children:a.createdBy})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs",style:{color:"var(--color-primary-400)"},children:"Tags"}),e.jsx("div",{className:"flex gap-1 flex-wrap",children:a.tags?.map(s=>e.jsx("span",{className:"badge badge-blue text-xs",children:s},s))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs",style:{color:"var(--color-primary-400)"},children:"Updated"}),e.jsx("p",{children:new Date(a.updatedAt).toLocaleDateString()})]})]})]}),r==="versions"&&e.jsx("div",{className:"space-y-3",children:a.versions?.map(s=>e.jsxs("div",{className:"p-3 rounded-lg border flex items-start justify-between hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-1.5 rounded-full bg-blue-100",children:e.jsx(k,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Version ",s.version]}),e.jsxs("p",{className:"text-xs",style:{color:"var(--color-primary-400)"},children:[new Date(s.createdAt).toLocaleDateString()," at ",new Date(s.createdAt).toLocaleTimeString()]}),e.jsxs("p",{className:"text-xs mt-1 font-mono truncate max-w-md",style:{color:"var(--color-primary-500)"},children:[s.content?.substring(0,80),"..."]})]})]}),e.jsx("span",{className:`badge ${p[s.status]?.color} text-xs`,children:s.status})]},s.version))}),r==="settings"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"A/B Test Traffic Split"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"range",min:"0",max:"100",defaultValue:"0",className:"flex-1"}),e.jsx("span",{className:"text-sm font-medium",children:"0%"})]}),e.jsx("p",{className:"text-xs",style:{color:"var(--color-primary-400)"},children:"Route a percentage of traffic to the latest version for testing"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Max Tokens Override"}),e.jsx("input",{type:"number",className:"input w-full",placeholder:"Default (no override)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Temperature"}),e.jsx("input",{type:"number",className:"input w-full",step:"0.1",min:"0",max:"2",placeholder:"0.7"})]})]})]})]})})}function G(){const[a,c]=t.useState([]),[g,r]=t.useState(!0),[i,d]=t.useState(""),[l,h]=t.useState("all"),[m,o]=t.useState(null);t.useEffect(()=>{v()},[]);const v=async()=>{r(!0);try{const s=await N.fetchJson("/prompts");c(Array.isArray(s)?s:f)}catch{c(f)}finally{r(!1)}},x=a.filter(s=>{if(i){const n=i.toLowerCase();if(!s.name?.toLowerCase().includes(n)&&!s.description?.toLowerCase().includes(n)&&!s.tags?.some(u=>u.includes(n)))return!1}return!(l!=="all"&&s.status!==l)});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Prompt Registry"}),e.jsxs("p",{style:{color:"var(--color-primary-500)"},children:[a.length," prompts managed with version control"]})]}),e.jsxs("button",{className:"btn btn-primary flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"})," New Prompt"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Total Prompts",value:a.length,color:"text-blue-600"},{label:"Approved",value:a.filter(s=>s.status==="APPROVED").length,color:"text-green-600"},{label:"Pending Review",value:a.filter(s=>s.status==="PENDING_REVIEW").length,color:"text-yellow-600"},{label:"Total Versions",value:a.reduce((s,n)=>s+(n.currentVersion||0),0),color:"text-purple-600"}].map(s=>e.jsxs("div",{className:"card p-4",children:[e.jsx("p",{className:"text-xs",style:{color:"var(--color-primary-400)"},children:s.label}),e.jsx("p",{className:`text-2xl font-bold ${s.color}`,children:s.value})]},s.label))}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(b,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4",style:{color:"var(--color-primary-400)"}}),e.jsx("input",{type:"text",className:"input w-full pl-10",placeholder:"Search prompts by name, description, or tag...",value:i,onChange:s=>d(s.target.value)})]}),e.jsxs("select",{className:"input",value:l,onChange:s=>h(s.target.value),children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"DRAFT",children:"Draft"}),e.jsx("option",{value:"PENDING_REVIEW",children:"Pending Review"}),e.jsx("option",{value:"APPROVED",children:"Approved"}),e.jsx("option",{value:"REJECTED",children:"Rejected"})]})]}),e.jsx("div",{className:"space-y-3",children:g?e.jsxs("div",{className:"text-center py-12 card",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-500 border-t-transparent mx-auto mb-2"}),e.jsx("p",{style:{color:"var(--color-primary-400)"},children:"Loading prompts..."})]}):x.length===0?e.jsx("div",{className:"text-center py-12 card",children:e.jsx("p",{style:{color:"var(--color-primary-400)"},children:"No prompts found"})}):x.map(s=>{const n=p[s.status]?.icon||j;return e.jsx("div",{className:"card p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>o(s),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsxs("span",{className:`badge ${p[s.status]?.color} text-xs flex items-center gap-1`,children:[e.jsx(n,{className:"w-3 h-3"})," ",s.status.replace("_"," ")]}),e.jsxs("span",{className:"text-xs",style:{color:"var(--color-primary-400)"},children:["v",s.currentVersion]})]}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--color-primary-500)"},children:s.description}),e.jsxs("div",{className:"flex items-center gap-3 text-xs",style:{color:"var(--color-primary-400)"},children:[e.jsx("span",{className:"flex items-center gap-1",children:e.jsx("code",{className:"bg-gray-100 px-1.5 py-0.5 rounded",children:s.model})}),e.jsx("span",{children:s.createdBy}),e.jsx("span",{children:new Date(s.updatedAt).toLocaleDateString()})]}),s.tags?.length>0&&e.jsx("div",{className:"flex gap-1 mt-2",children:s.tags.map(u=>e.jsx("span",{className:"badge badge-blue text-xs",children:u},u))})]}),e.jsx(E,{className:"w-5 h-5 shrink-0",style:{color:"var(--color-primary-300)"}})]})},s.id)})}),e.jsx(O,{prompt:m,onClose:()=>o(null)})]})}export{G as default};
