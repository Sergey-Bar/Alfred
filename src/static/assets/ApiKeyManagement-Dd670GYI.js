import{j as e,a as i}from"./index-DmO1ypIk.js";import{r as l}from"./vendor-CoKE50sv.js";import{a4 as n,K as d,v as y,m as o,a5 as u,o as f,x as v}from"./icons-UwgmH0ZI.js";const c=[{id:1,name:"Production API",prefix:"sk-prod-***a8f2",created:"2026-01-15",lastUsed:"2 min ago",requests30d:42100,status:"active",expiresIn:"85 days"},{id:2,name:"Development API",prefix:"sk-dev-***c3d1",created:"2026-02-01",lastUsed:"1 hour ago",requests30d:8900,status:"active",expiresIn:"116 days"},{id:3,name:"CI/CD Pipeline",prefix:"sk-ci-***e7b4",created:"2025-11-20",lastUsed:"5 hours ago",requests30d:3400,status:"active",expiresIn:"30 days"},{id:4,name:"Legacy Integration",prefix:"sk-leg-***f9a3",created:"2025-06-10",lastUsed:"14 days ago",requests30d:0,status:"expired",expiresIn:"Expired"}];function I(){const[a,r]=l.useState([]),[x,h]=l.useState(!0),[N,m]=l.useState(!1);l.useEffect(()=>{async function s(){try{const t=await i.getApiKeys();r(t&&t.length>0?t:c)}catch(t){console.warn("Failed to fetch API keys, using demo data:",t),r(c)}finally{h(!1)}}s()},[]);const p=async s=>{try{await i.rotateApiKey(s);const t=await i.getApiKeys();r(t&&t.length>0?t:c)}catch(t){console.error("Failed to rotate key:",t)}},j=async s=>{if(window.confirm("Are you sure you want to revoke this API key?"))try{await i.revokeApiKey(s),r(a.filter(t=>t.id!==s))}catch(t){console.error("Failed to revoke key:",t)}};return x?e.jsx("div",{className:"p-6 flex items-center justify-center",children:e.jsx(n,{className:"w-6 h-6 animate-spin"})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"page-header flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"w-6 h-6",style:{color:"var(--color-accent-600)"}}),"API Keys"]}),e.jsx("p",{className:"subtitle",children:"Create, manage, and rotate API keys for your applications"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>m(!0),children:[e.jsx(y,{className:"w-4 h-4 mr-2"})," Create API Key"]})]}),a.some(s=>s.expiresIn==="30 days")&&e.jsxs("div",{className:"card flex items-center gap-4 border-l-4",style:{borderLeftColor:"var(--color-warning-600)"},children:[e.jsx(o,{className:"w-5 h-5 text-yellow-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Keys expiring soon"}),e.jsxs("p",{className:"text-sm",style:{color:"var(--color-primary-500)"},children:[a.filter(s=>s.expiresIn==="30 days").length," key(s) will expire within 30 days. Rotate them to avoid service disruption."]})]})]}),e.jsx("div",{className:"card p-0 overflow-hidden",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Key"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created"}),e.jsx("th",{children:"Last Used"}),e.jsx("th",{children:"Requests (30d)"}),e.jsx("th",{children:"Expires"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:a.map(s=>e.jsxs("tr",{className:"group",children:[e.jsx("td",{children:e.jsx("span",{className:"font-medium",children:s.name})}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"text-xs font-mono",children:s.prefix}),e.jsx("button",{className:"btn btn-ghost p-1 opacity-0 group-hover:opacity-100",children:e.jsx(u,{className:"w-3.5 h-3.5"})})]})}),e.jsx("td",{children:e.jsxs("span",{className:`badge ${s.status==="active"?"badge-green":"badge-red"}`,children:[s.status==="active"?e.jsx(f,{className:"w-3 h-3 mr-1"}):e.jsx(o,{className:"w-3 h-3 mr-1"}),s.status]})}),e.jsx("td",{className:"text-sm",children:s.created}),e.jsx("td",{className:"text-sm",children:s.lastUsed}),e.jsx("td",{className:"text-sm font-medium",children:s.requests30d.toLocaleString()}),e.jsx("td",{children:e.jsx("span",{className:`text-sm ${s.expiresIn==="Expired"?"text-red-600":s.expiresIn==="30 days"?"text-yellow-600":""}`,children:s.expiresIn})}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{className:"btn btn-ghost p-1.5",title:"Rotate",onClick:()=>p(s.id),children:e.jsx(n,{className:"w-4 h-4"})}),e.jsx("button",{className:"btn btn-ghost p-1.5 text-red-500",title:"Revoke",onClick:()=>j(s.id),children:e.jsx(v,{className:"w-4 h-4"})})]})})]},s.id))})]})}),e.jsx("div",{className:"card",style:{background:"var(--color-primary-100)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(d,{className:"w-5 h-5 mt-0.5",style:{color:"var(--color-primary-500)"}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"API Key Security"}),e.jsxs("ul",{className:"text-sm mt-1 space-y-1",style:{color:"var(--color-primary-500)"},children:[e.jsx("li",{children:"• API keys are hashed at rest — the full key is only shown once at creation time"}),e.jsx("li",{children:"• Rotate keys regularly (recommended: every 90 days)"}),e.jsx("li",{children:"• Never commit API keys to version control"}),e.jsx("li",{children:"• Use separate keys for production and development environments"})]})]})]})})]})}export{I as default};
