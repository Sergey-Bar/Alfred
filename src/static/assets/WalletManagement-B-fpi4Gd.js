import{j as e,a as h}from"./index-C1A5pA5l.js";import{r as o}from"./vendor-CoKE50sv.js";import{W as m,r as b,f as W}from"./icons-iorli5jj.js";function u({wallet:a,type:c}){const i=a.total>0?a.used/a.total*100:0,r=i>=80,l=i>=95;return e.jsxs("div",{className:"card hover-lift",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${l?"bg-red-100":r?"bg-yellow-100":"bg-blue-100"}`,children:e.jsx(m,{className:`w-5 h-5 ${l?"text-red-600":r?"text-yellow-600":"text-blue-600"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:a.name}),e.jsx("span",{className:"text-xs",style:{color:"var(--color-primary-500)"},children:c})]})]}),e.jsx("span",{className:`badge ${l?"badge-red":r?"badge-yellow":"badge-green"}`,children:l?"Critical":r?"Warning":"Healthy"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsxs("span",{style:{color:"var(--color-primary-500)"},children:["Used: ",a.used.toLocaleString()," credits"]}),e.jsxs("span",{className:"font-medium",children:[i.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full h-2 rounded-full",style:{background:"var(--color-primary-200)"},children:e.jsx("div",{className:`h-full rounded-full transition-all ${l?"bg-red-500":r?"bg-yellow-500":"bg-blue-500"}`,style:{width:`${Math.min(i,100)}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",style:{color:"var(--color-primary-400)"},children:[e.jsx("span",{children:"0"}),e.jsxs("span",{children:[a.total.toLocaleString()," credits"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"p-2 rounded-md",style:{background:"var(--color-primary-100)"},children:[e.jsx("p",{className:"text-xs",style:{color:"var(--color-primary-500)"},children:"Hard Limit"}),e.jsx("p",{className:"font-semibold",children:a.hardLimit?.toLocaleString()||a.total.toLocaleString()})]}),e.jsxs("div",{className:"p-2 rounded-md",style:{background:"var(--color-primary-100)"},children:[e.jsx("p",{className:"text-xs",style:{color:"var(--color-primary-500)"},children:"Soft Limit"}),e.jsx("p",{className:"font-semibold",children:a.softLimit?.toLocaleString()||Math.floor(a.total*.8).toLocaleString()})]})]})]})}function P(){const[a,c]=o.useState([]),[i,r]=o.useState([]),[l,g]=o.useState(""),[j,y]=o.useState(!0);o.useEffect(()=>{async function s(){try{const[d,f]=await Promise.all([h.get("/users").catch(()=>({data:[]})),h.get("/teams").catch(()=>({data:[]}))]),N=(d.data||[]).map(t=>({id:t.id,name:t.name||t.email,type:"personal",total:parseFloat(t.personal_quota||1e3),used:parseFloat(t.used_tokens||0)})),v=(f.data||[]).map(t=>({id:t.id,name:t.name,type:"team",total:parseFloat(t.common_pool||1e4),used:parseFloat(t.used_pool||0)}));c([...v,...N])}catch{c(S())}y(!1)}s()},[]);const n=a.filter(s=>s.name.toLowerCase().includes(l.toLowerCase())),x=n.filter(s=>s.type==="team"),p=n.filter(s=>s.type==="personal");return j?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"skeleton h-8 w-64"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[...Array(6)].map((s,d)=>e.jsx("div",{className:"skeleton h-48 rounded-xl"},d))})]}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"page-header flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"w-6 h-6",style:{color:"var(--color-accent-600)"}}),"Wallets & Budget"]}),e.jsx("p",{className:"subtitle",children:"Manage credit allocations across users and teams"})]}),e.jsxs("button",{className:"btn btn-primary",children:[e.jsx(b,{className:"w-4 h-4 mr-2"})," Allocate Credits"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4",style:{color:"var(--color-primary-400)"}}),e.jsx("input",{type:"text",placeholder:"Search wallets...",value:l,onChange:s=>g(s.target.value),className:"input pl-10",style:{maxWidth:400}})]}),x.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Team Pools"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(s=>e.jsx(u,{wallet:s,type:"Team Pool"},s.id))})]}),p.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Personal Wallets"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(s=>e.jsx(u,{wallet:s,type:"Personal"},s.id))})]}),n.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx(m,{className:"icon"}),e.jsx("h3",{children:"No wallets found"}),e.jsx("p",{children:"Try adjusting your search or create a new wallet allocation."})]})]})}function S(){return[{id:"1",name:"Engineering",type:"team",total:5e4,used:32e3},{id:"2",name:"Product",type:"team",total:25e3,used:18500},{id:"3",name:"Research",type:"team",total:15e3,used:14200},{id:"4",name:"Alice Chen",type:"personal",total:2e3,used:1200},{id:"5",name:"Bob Smith",type:"personal",total:2e3,used:400},{id:"6",name:"Carol Davis",type:"personal",total:1500,used:1480}]}export{P as default};
