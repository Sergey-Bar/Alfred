# Alfred Configuration
# Copy this file to .env and fill in your values

# ===========================================
# Database Configuration
# ===========================================

# PostgreSQL (recommended for production)
DATABASE_URL=postgresql://user:password@localhost:5432/alfred

# SQLite (for development/testing)
# DATABASE_URL=sqlite:///./alfred.db

# ===========================================
# Application Settings
# ===========================================

# Debug mode (set to false in production!)
DEBUG=false

# ===========================================
# LLM Provider API Keys
# Add the keys for providers you want to use
# ===========================================

# --- Public LLM APIs ---

# OpenAI (GPT-4o, GPT-4-turbo, o1, etc.)
OPENAI_API_KEY=sk-...

# Anthropic (Claude 3.5 Sonnet, Claude 3 Opus, etc.)
ANTHROPIC_API_KEY=sk-ant-...

# Google (Gemini 1.5 Pro, Gemini 2.0, etc.)
GOOGLE_API_KEY=...

# --- Enterprise Cloud ---

# Azure OpenAI
AZURE_API_KEY=...
AZURE_API_BASE=https://your-resource.openai.azure.com/
AZURE_API_VERSION=2024-02-15-preview
AZURE_DEPLOYMENT_NAME=gpt-4o

# AWS Bedrock (Claude, Llama, Titan, etc.)
AWS_ACCESS_KEY_ID=...
AWS_SECRET_ACCESS_KEY=...
AWS_REGION=us-east-1

# --- Self-Hosted / Open Source ---

# vLLM Server (Llama 3.1, Mistral, etc.)
# Point to your vLLM OpenAI-compatible endpoint
VLLM_API_BASE=http://gpu-server:8000/v1

# Text Generation Inference (TGI by HuggingFace)
TGI_API_BASE=http://tgi-server:8080

# Ollama (local models)
OLLAMA_API_BASE=http://localhost:11434

# --- Other Providers ---

# Mistral
MISTRAL_API_KEY=...

# Cohere
COHERE_API_KEY=...

# Together AI
TOGETHER_API_KEY=...

# Replicate
REPLICATE_API_TOKEN=...

# ===========================================
# Notifications - Slack
# ===========================================

# Slack incoming webhook URL (get from: Slack App > Incoming Webhooks)
SLACK_WEBHOOK_URL=

# Optional: Separate webhook for critical alerts (quota exceeded, errors)
SLACK_ALERTS_WEBHOOK_URL=

# Optional: Slack bot token for advanced features (user mentions, DMs)
SLACK_BOT_TOKEN=xoxb-...

# ===========================================
# Notifications - Microsoft Teams
# ===========================================

# Teams incoming webhook URL (get from: Channel > Connectors > Incoming Webhook)
TEAMS_WEBHOOK_URL=https://outlook.office.com/webhook/...

# Optional: Separate webhook for critical alerts
TEAMS_ALERTS_WEBHOOK_URL=

# ===========================================
# Notifications - Telegram
# ===========================================

# Telegram bot token (get from @BotFather)
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz

# Default chat/group/channel ID to send notifications
# Get chat ID: send a message to @userinfobot or use getUpdates API
TELEGRAM_CHAT_ID=-1001234567890

# Optional: Separate chat for critical alerts
TELEGRAM_ALERTS_CHAT_ID=

# ===========================================
# Notifications - WhatsApp Business
# ===========================================

# WhatsApp Business Phone Number ID (from Meta Developer Console)
WHATSAPP_PHONE_NUMBER_ID=123456789012345

# Meta Graph API access token
WHATSAPP_ACCESS_TOKEN=EAAxxxxxxx...

# Default recipient phone number (with country code, no + or spaces)
# Example: 14155551234 for +1 (415) 555-1234
WHATSAPP_RECIPIENT_NUMBER=14155551234

# Optional: Separate recipient for critical alerts
WHATSAPP_ALERTS_RECIPIENT_NUMBER=

# Optional: Pre-approved template name for business-initiated messages
# Required when messaging users outside the 24h conversation window
WHATSAPP_TEMPLATE_NAME=alfred_alert

# ===========================================
# Notification Settings
# ===========================================

# Enable/disable notifications globally
NOTIFICATIONS_ENABLED=true

# Quota percentage threshold to trigger warning notifications (default: 80)
NOTIFY_QUOTA_WARNING_THRESHOLD=80

# Notification triggers (all default to true)
NOTIFY_ON_QUOTA_EXCEEDED=true
NOTIFY_ON_APPROVAL_REQUEST=true
NOTIFY_ON_VACATION_CHANGE=true
# ===========================================
# Enterprise Identity & SSO
# ===========================================

# --- Active Directory / LDAP ---
LDAP_ENABLED=false
LDAP_SERVER=ldap://ad.company.com:389
LDAP_BASE_DN=DC=company,DC=com
LDAP_BIND_DN=CN=alfred-svc,OU=ServiceAccounts,DC=company,DC=com
LDAP_BIND_PASSWORD=
LDAP_USER_FILTER=(objectClass=user)
LDAP_GROUP_FILTER=(objectClass=group)
LDAP_SYNC_INTERVAL_MINUTES=60

# --- SSO / OAuth2 ---
# Supported: okta, azure_ad, google, keycloak
SSO_ENABLED=false
SSO_PROVIDER=azure_ad
SSO_CLIENT_ID=
SSO_CLIENT_SECRET=
SSO_ISSUER_URL=https://login.microsoftonline.com/{tenant}/v2.0
SSO_SCOPES=openid profile email

# --- SCIM 2.0 Provisioning ---
SCIM_ENABLED=false
SCIM_BEARER_TOKEN=

# ===========================================
# HR System Integration (RBAC)
# ===========================================

# --- HRIS Integration ---
# Supported: workday, sap_sf, hibob, bamboohr, personio
HRIS_ENABLED=false
HRIS_PROVIDER=workday
HRIS_API_URL=https://wd5-impl-services1.workday.com/ccx/service/
HRIS_API_KEY=
HRIS_SYNC_INTERVAL_MINUTES=120

# Role-based quota allocation (JSON)
# Maps job levels to daily token quotas
RBAC_DEFAULT_QUOTAS={"junior": 50000, "mid": 100000, "senior": 250000, "lead": 500000, "executive": 1000000}

# --- Project Management Integration ---
# Supported: jira, asana, linear, monday
PM_INTEGRATION_ENABLED=false
PM_PROVIDER=jira
PM_API_URL=https://company.atlassian.net
PM_API_TOKEN=
PM_HIGH_PRIORITY_BURST_MULTIPLIER=2.0

# ===========================================
# Liquidity Pool & Rollover
# ===========================================

# Enable company-wide liquidity pool for unused credits
LIQUIDITY_POOL_ENABLED=true

# Roll unused credits to reserve at billing cycle end
ROLLOVER_ENABLED=true
ROLLOVER_PERCENTAGE=50.0

# Discount for requesting credits from reserve
RESERVE_REQUEST_DISCOUNT=20.0

# Day of month for billing cycle reset (1-28)
BILLING_CYCLE_DAY=1

# ===========================================
# Security & Guardrails
# ===========================================

# --- Transfer Security ---
# Credit threshold requiring MFA for transfers
MFA_REQUIRED_THRESHOLD=10000.0

# Cooldown between transfers to same recipient (seconds)
TRANSFER_COOLDOWN_SECONDS=60

# Maximum credits transferable per day
MAX_DAILY_TRANSFER_AMOUNT=100000.0

# --- Output Guardrails ---
# Max output tokens when using transferred credits (prevents abuse)
MAX_OUTPUT_TOKENS_TRANSFERRED=4096

# Detect repetitive/nonsensical output patterns
ENABLE_SEMANTIC_SCRUTINY=true

# Repetitions before killing stream
LOOP_DETECTION_THRESHOLD=3

# --- Anomaly Detection ---
ANOMALY_DETECTION_ENABLED=true
ANOMALY_ALERT_THRESHOLD=3.0

# --- Session/JIT Tokens ---
SESSION_TOKEN_TTL_MINUTES=15

# --- Secrets Management (HashiCorp Vault) ---
VAULT_ENABLED=false
VAULT_ADDR=https://vault.company.com:8200
VAULT_TOKEN=

# ===========================================
# Analytics & ROI Integrations
# ===========================================

# GitHub (engineering ROI tracking)
GITHUB_TOKEN=ghp_...
GITHUB_ORG=your-company

# Salesforce (sales ROI tracking)
SALESFORCE_ENABLED=false
SALESFORCE_INSTANCE_URL=https://company.salesforce.com
SALESFORCE_ACCESS_TOKEN=

# ===========================================
# Semantic Cache
# ===========================================

# Reduce redundant API calls with semantic similarity caching
SEMANTIC_CACHE_ENABLED=false
SEMANTIC_CACHE_SIMILARITY_THRESHOLD=0.90
SEMANTIC_CACHE_TTL_HOURS=24

# Fee for cache hits (0 = free, reduces cost for common queries)
CACHE_ACCESS_FEE_CREDITS=0.1

# ===========================================
# Multi-Tenant / SaaS Mode
# ===========================================

# Enable multi-tenant SaaS with isolated customer data
MULTI_TENANT_MODE=false

# TEE Provider: azure_confidential, aws_nitro, gcp_confidential
TEE_PROVIDER=

# Hardware enclave attestation for compliance
ENCLAVE_ATTESTATION_ENABLED=false

# Data isolation level: strict (TEE), standard
CLIENT_DATA_ISOLATION=strict

# ===========================================
# Version-Locked Pricing
# ===========================================

# Insulate budgets from model version token changes
VERSION_LOCKED_PRICING_ENABLED=true

# Capability class to credit multiplier mapping
CAPABILITY_PRICING_MAP={"frontier_reasoning": 3.0, "standard_chat": 1.0, "fast_inference": 0.5, "embedding": 0.1}

# ===========================================
# Emergency Overdraft
# ===========================================

# Allow emergency overdraft for critical work
OVERDRAFT_ENABLED=true

# Overdraft limit as percentage of user quota (10% = 0.1)
OVERDRAFT_LIMIT_MULTIPLIER=0.1

# Interest rate for overdraft repayment (deducted from next cycle)
OVERDRAFT_INTEREST_RATE=1.5

# ===========================================
# Predictive Analytics
# ===========================================

# Enable predictive burn-rate alerts
BURN_RATE_ALERTS_ENABLED=true

# Alert when projected depletion is before cycle end (0.8 = 80% through cycle)
BURN_RATE_WARNING_THRESHOLD=0.8